<?xml version='1.0' encoding='UTF-8'?>
<dataset>
  <form_field form_field_id="2" form_id="2" field_id="128" field_number="1" field_part="" required="false" changed_by="15971" date_changed="2007-11-15 21:00:26.0" creator="1" date_created="2006-06-21 17:22:55.0" guid="4f55827e-26fe-102b-80cb-0017a47871b2"/>
  <form_field form_field_id="8" form_id="2" field_id="317" field_number="2" field_part="" page_number="1" parent_form_field="2" required="false" changed_by="15971" date_changed="2007-11-15 21:00:26.0" creator="1" date_created="2006-06-21 17:27:29.0" guid="4f558922-26fe-102b-80cb-0017a47871b2"/>
  <form_field form_field_id="9" form_id="2" field_id="201" field_number="2" field_part="" page_number="1" parent_form_field="2" required="false" changed_by="15971" date_changed="2007-11-15 21:00:25.0" creator="1" date_created="2006-06-21 17:28:00.0" guid="4f558c56-26fe-102b-80cb-0017a47871b2"/>
  <field field_id="1" name="SELF PAY" description="Patient pays for their own evaluation and related treatment.  Used as an answer for &quot;pay category&quot;." field_type="1" concept_id="5269" table_name="" default_value="" select_multiple="false" creator="1" date_created="2006-07-18 11:03:31.0" guid="4db74ede-26fe-102b-80cb-0017a47871b2"/>
  <field field_id="2" name="PATIENT" description="Patient section of form" field_type="5" table_name="" attribute_name="" default_value="" select_multiple="false" creator="1" date_created="2006-07-18 11:04:36.0" guid="4db7529e-26fe-102b-80cb-0017a47871b2"/>
  <field field_id="3" name="ENCOUNTER" description="Encounter section of form" field_type="5" table_name="" attribute_name="" default_value="" select_multiple="false" creator="1" date_created="2006-07-18 11:06:52.0" guid="4db75546-26fe-102b-80cb-0017a47871b2"/>
  <form form_id="1" name="BROKEN FORM" version="0.1" build="1" published="0" description="This form contains only the common/core elements needed for most forms" encounter_type="1" template="http://schema.pih.org/FormEntry/1" xslt="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;!--
OpenMRS FormEntry Form HL7 Translation

This XSLT is used to translate OpenMRS forms from XML into HL7 2.5 format

@author Burke Mamlin, MD
@author Ben Wolfe
@version 1.9.5

1.9.5 - allow for organizing sections under &quot;obs&quot; section
1.9.4 - add support for message uid (as HL7 control id) and transform of patient.health_center to Discharge to Location (PV1-37)
1.9.3 - fixed rounding error on timestamp (tenths of seconds getting rounded up, causing &quot;60&quot; seconds in some cases) 
1.9.2 - first generally useful version
--&gt;

&lt;xsl:stylesheet version=&quot;2.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:fn=&quot;http://www.w3.org/2005/xpath-functions&quot; xmlns:xdt=&quot;http://www.w3.org/2005/xpath-datatypes&quot;&gt;
	&lt;xsl:output method=&quot;text&quot; version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; indent=&quot;no&quot;/&gt;

&lt;xsl:variable name=&quot;SENDING-APPLICATION&quot;&gt;FORMENTRY&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;SENDING-FACILITY&quot;&gt;AMRS.ELD&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;RECEIVING-APPLICATION&quot;&gt;HL7LISTENER&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;RECEIVING-FACILITY&quot;&gt;AMRS.ELD&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;PATIENT-AUTHORITY&quot;&gt;&lt;/xsl:variable&gt; &lt;!-- leave blank for internal id, max 20 characters --&gt;
                                                       &lt;!-- for now, must match patient_identifier_type.name --&gt;
&lt;xsl:variable name=&quot;FORM-AUTHORITY&quot;&gt;AMRS.ELD.FORMID&lt;/xsl:variable&gt; &lt;!-- max 20 characters --&gt;

&lt;xsl:template match=&quot;/&quot;&gt;
	&lt;xsl:apply-templates /&gt;
&lt;/xsl:template&gt;

&lt;!-- Form template --&gt;
&lt;xsl:template match=&quot;form&quot;&gt;
	&lt;!-- MSH Header --&gt;
	&lt;xsl:text&gt;MSH|^~\&amp;amp;&lt;/xsl:text&gt;   &lt;!-- Message header, field separator, and encoding characters --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-3 Sending application --&gt;
	&lt;xsl:value-of select=&quot;$SENDING-APPLICATION&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-4 Sending facility --&gt;
	&lt;xsl:value-of select=&quot;$SENDING-FACILITY&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-5 Receiving application --&gt;
	&lt;xsl:value-of select=&quot;$RECEIVING-APPLICATION&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-6 Receiving facility --&gt;
	&lt;xsl:value-of select=&quot;$RECEIVING-FACILITY&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-7 Date/time message sent --&gt;
	&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;current-dateTime()&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-8 Security --&gt;
	&lt;xsl:text&gt;|ORU^R01&lt;/xsl:text&gt;       &lt;!-- MSH-9 Message type ^ Event type (observation report unsolicited) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-10 Message control ID --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;header/uid&quot;&gt;
			&lt;xsl:value-of select=&quot;header/uid&quot; /&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;patient/patient.patient_id&quot; /&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;current-dateTime()&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|P&lt;/xsl:text&gt;             &lt;!-- MSH-11 Processing ID --&gt;
	&lt;xsl:text&gt;|2.5&lt;/xsl:text&gt;           &lt;!-- MSH-12 HL7 version --&gt;
	&lt;xsl:text&gt;|1&lt;/xsl:text&gt;             &lt;!-- MSH-13 Message sequence number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-14 Continuation Pointer --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-15 Accept Acknowledgement Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-16 Application Acknowledgement Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-17 Country Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-18 Character Set --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-19 Principal Language of Message --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-20 Alternate Character Set Handling Scheme --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-21 Message Profile Identifier --&gt;
	&lt;xsl:value-of select=&quot;@id&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;
	&lt;xsl:value-of select=&quot;$FORM-AUTHORITY&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;

	&lt;!-- PID header --&gt;
	&lt;xsl:text&gt;PID&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-1 Set ID --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-2 (deprecated) Patient ID --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-3 Patient Identifier List --&gt;
	&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
		&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.patient_id&quot; /&gt;
		&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
		&lt;xsl:with-param name=&quot;type&quot; select=&quot;L&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:if test=&quot;patient/patient.previous_mrn and string-length(patient/patient.previous_mrn) &gt; 0&quot;&gt;
		&lt;xsl:text&gt;~&lt;/xsl:text&gt;
		&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
			&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.previous_mrn&quot; /&gt;
			&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
			&lt;xsl:with-param name=&quot;type&quot; select=&quot;PRIOR&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:if&gt;
	&lt;!-- Additional patient identifiers --&gt;
	&lt;!-- This example is for an MTCT-PLUS identifier used in the AMPATH project in Kenya (skipped if not present) --&gt;
	&lt;xsl:if test=&quot;patient/patient.mtctplus_id and string-length(patient/patient.mtctplus_id) &gt; 0&quot;&gt;
		&lt;xsl:text&gt;~&lt;/xsl:text&gt;
		&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
			&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.mtctplus_id&quot; /&gt;
			&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
			&lt;xsl:with-param name=&quot;type&quot; select=&quot;MTCTPLUS&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:if&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-4 (deprecated) Alternate patient ID --&gt;
	&lt;!-- PID-5 Patient name --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- Family name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.family_name&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Given name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.given_name&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Middle name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.middle_name&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-6 Mother&apos;s maiden name --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-7 Date/Time of Birth --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.date_of_birth&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
	
	&lt;!-- PV1 header --&gt;
	&lt;xsl:text&gt;PV1&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-1 Sub ID --&gt;
	&lt;xsl:text&gt;|O&lt;/xsl:text&gt;             &lt;!-- PV1-2 Patient class (O = outpatient) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-3 Patient location --&gt;
	&lt;xsl:value-of select=&quot;encounter/encounter.location_id&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-4 Admission type (2 = return) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-5 Pre-Admin Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-6 Prior Patient Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-7 Attending Doctor --&gt;
	&lt;xsl:value-of select=&quot;encounter/encounter.provider_id&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-8 Referring Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-9 Consulting Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-10 Hospital Service --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-11 Temporary Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-12 Preadmin Test Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-13 Re-adminssion Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-14 Admit Source --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-15 Ambulatory Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-16 VIP Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-17 Admitting Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-18 Patient Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-19 Visit Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-20 Financial Class --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-21 Charge Price Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-22 Courtesy Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-23 Credit Rating --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-24 Contract Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-25 Contract Effective Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-26 Contract Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-27 Contract Period --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-28 Interest Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-29 Transfer to Bad Debt Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-30 Transfer to Bad Debt Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-31 Bad Debt Agency Code --&gt;
  &lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-31 Bad Debt Transfer Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-33 Bad Debt Recovery Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-34 Delete Account Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-35 Delete Account Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-36 Discharge Disposition --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-37 Discharge To Location --&gt;
	&lt;xsl:if test=&quot;patient/patient.health_center&quot;&gt;
		&lt;xsl:value-of select=&quot;replace(patient/patient.health_center,&apos;\^&apos;,&apos;&amp;amp;&apos;)&quot; /&gt;
	&lt;/xsl:if&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-38 Diet Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-39 Servicing Facility --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-40 Bed Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-41 Account Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-42 Pending Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-43 Prior Temporary Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-44 Admit Date/Time --&gt;
	&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;encounter/encounter.encounter_datetime&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-45 Discharge Date/Time --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-46 Current Patient Balance --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-47 Total Charges --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-48 Total Adjustments --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-49 Total Payments --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-50 Alternate Visit ID --&gt;
	&lt;xsl:text&gt;|V&lt;/xsl:text&gt;             &lt;!-- PV1-51 Visit Indicator --&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- We use encounter date as the timestamp for each observation --&gt;
	&lt;xsl:variable name=&quot;encounterTimestamp&quot;&gt;
		&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
			&lt;xsl:with-param name=&quot;date&quot; select=&quot;encounter/encounter.encounter_datetime&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:variable&gt;
	
	&lt;!-- ORC Common Order Segment --&gt;
	&lt;xsl:text&gt;ORC&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|RE&lt;/xsl:text&gt;            &lt;!-- ORC-1 Order Control (RE = obs to follow) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-2 Placer Order Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-3 Filler Order Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-4 Placer Group Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-5 Order Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-6 Response Flag --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-7 Quantity/Timing --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-8 Parent --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-9 Date/Time of Transaction --&gt;
	&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;xs:dateTime(header/date_entered)&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-10 Entered By --&gt;
	&lt;xsl:value-of select=&quot;header/enterer&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- Observation(s) --&gt;
	&lt;!-- &lt;xsl:variable name=&quot;obsList&quot; select=&quot;obs/*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]&quot; /&gt; --&gt;
	&lt;xsl:variable name=&quot;obsList&quot; select=&quot;obs/*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]|obs/*[not(@openmrs_concept)]/*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]&quot; /&gt;
	&lt;xsl:variable name=&quot;obsListCount&quot; select=&quot;count($obsList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;!-- Observation OBR --&gt;
	&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
	&lt;xsl:text&gt;1&lt;/xsl:text&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
	&lt;xsl:value-of select=&quot;obs/@openmrs_concept&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- observation OBXs --&gt;
	&lt;xsl:for-each select=&quot;$obsList&quot;&gt;
		&lt;xsl:choose&gt;
			&lt;xsl:when test=&quot;value&quot;&gt;
				&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
					&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
					&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
					&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
					&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
					&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
					&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
					&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
				&lt;/xsl:call-template&gt;
			&lt;/xsl:when&gt;
			&lt;xsl:otherwise&gt;
				&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
				&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
						&lt;xsl:with-param name=&quot;subId&quot; select=&quot;concat($setId,position())&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:for-each&gt;
			&lt;/xsl:otherwise&gt;
		&lt;/xsl:choose&gt;
	&lt;/xsl:for-each&gt;
	
	&lt;!-- Grouped observation(s) --&gt;
	&lt;!-- &lt;xsl:variable name=&quot;obsGroupList&quot; select=&quot;obs/*[@openmrs_concept and not(date) and *[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]]&quot; /&gt; --&gt;
	&lt;xsl:variable name=&quot;obsGroupList&quot; select=&quot;obs/*[@openmrs_concept and not(date) and *[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]]|obs/*[not(@openmrs_concept)]/*[@openmrs_concept and not(date) and *[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]]&quot; /&gt;
	&lt;xsl:variable name=&quot;obsGroupListCount&quot; select=&quot;count($obsGroupList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:for-each select=&quot;$obsGroupList&quot;&gt;
		&lt;!-- Observation OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + position()&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
		
		&lt;!-- Generate OBXs --&gt;
		&lt;xsl:for-each select=&quot;*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;value&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
						&lt;xsl:with-param name=&quot;subId&quot; select=&quot;1&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;
					&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
						&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
							&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
							&lt;xsl:with-param name=&quot;subId&quot; select=&quot;concat(&apos;1.&apos;,position())&quot; /&gt;
							&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
							&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
							&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
						&lt;/xsl:call-template&gt;
					&lt;/xsl:for-each&gt;
				&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:for-each&gt;
	&lt;/xsl:for-each&gt;

	&lt;!-- Problem list(s) --&gt;
	&lt;xsl:variable name=&quot;problemList&quot; select=&quot;problem_list/*[value[text() != &apos;&apos;]]&quot; /&gt;
	&lt;xsl:variable name=&quot;problemListCount&quot; select=&quot;count($problemList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:if test=&quot;$problemList&quot;&gt;
		&lt;!-- Problem list OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + $obsGroupListCount + 1&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;problem_list/@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

		&lt;!-- Problem list OBXs --&gt;
		&lt;xsl:for-each select=&quot;$problemList&quot;&gt;
			&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
				&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
				&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;&apos;CWE&apos;&quot; /&gt;
				&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
				&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
				&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
				&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
			&lt;/xsl:call-template&gt;		
		&lt;/xsl:for-each&gt;
	&lt;/xsl:if&gt;
	
	&lt;!-- Orders --&gt;
	&lt;xsl:variable name=&quot;orderList&quot; select=&quot;orders/*[*[@openmrs_concept and ((value and value/text() != &apos;&apos;) or *[@openmrs_concept and text() = &apos;true&apos;])]]&quot; /&gt;
	&lt;xsl:variable name=&quot;orderListCount&quot; select=&quot;count($orderList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:for-each select=&quot;$orderList&quot;&gt;
		&lt;!-- Order section OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + $obsGroupListCount + $problemListCount + 1&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
	
		&lt;!-- Order OBXs --&gt;
		&lt;xsl:for-each select=&quot;*[@openmrs_concept and ((value and value/text() != &apos;&apos;) or *[@openmrs_concept and text() = &apos;true&apos;])]&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;value&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;
					&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
						&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
							&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
							&lt;xsl:with-param name=&quot;subId&quot; select=&quot;position()&quot; /&gt;
							&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
							&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
							&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
						&lt;/xsl:call-template&gt;
					&lt;/xsl:for-each&gt;
				&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:for-each&gt;	
	&lt;/xsl:for-each&gt;
	
&lt;/xsl:template&gt;

&lt;!-- Patient Identifier (CX) generator --&gt;
&lt;xsl:template name=&quot;patient_id&quot;&gt;
	&lt;xsl:param name=&quot;pid&quot; /&gt;
	&lt;xsl:param name=&quot;auth&quot; /&gt;
	&lt;xsl:param name=&quot;type&quot; /&gt;
	&lt;xsl:value-of select=&quot;$pid&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Check digit --&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Check Digit Scheme --&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Assigning Authority --&gt;
	&lt;xsl:value-of select=&quot;$auth&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Identifier Type --&gt;
	&lt;xsl:value-of select=&quot;$type&quot; /&gt;
&lt;/xsl:template&gt;

&lt;!-- OBX Generator --&gt;
&lt;xsl:template name=&quot;obsObx&quot;&gt;
	&lt;xsl:param name=&quot;setId&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;subId&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;datatype&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:param name=&quot;concept&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:param name=&quot;date&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;time&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;value&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;units&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;encounterTimestamp&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:text&gt;OBX&lt;/xsl:text&gt;                     &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Set ID --&gt;
	&lt;xsl:value-of select=&quot;$setId&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Observation datatype --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;BIT&apos;&quot;&gt;
			&lt;xsl:text&gt;NM&lt;/xsl:text&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$datatype&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Concept (what was observed --&gt;
	&lt;xsl:value-of select=&quot;$concept&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Sub-ID --&gt;
	&lt;xsl:value-of select=&quot;$subId&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Value --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;TS&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;DT&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;TM&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Time&quot;&gt;
				&lt;xsl:with-param name=&quot;time&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;BIT&apos;&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;$value = &apos;0&apos; or upper-case($value) = &apos;FALSE&apos;&quot;&gt;0&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;1&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$value&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Units --&gt;
	&lt;xsl:value-of select=&quot;$units&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Reference range --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Abnormal flags --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Probability --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Nature of abnormal test --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Observation result status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Effective date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- User defined access checks --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Date time of observation --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$date and $time&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;dateTime($date,$time)&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$date&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$date&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$encounterTimestamp&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted timestamp --&gt;
&lt;xsl:template name=&quot;hl7Timestamp&quot;&gt;
	&lt;xsl:param name=&quot;date&quot; /&gt;
	&lt;xsl:if test=&quot;string($date) != &apos;&apos;&quot;&gt;
		&lt;xsl:value-of select=&quot;concat(year-from-dateTime($date),format-number(month-from-dateTime($date),&apos;00&apos;),format-number(day-from-dateTime($date),&apos;00&apos;),format-number(hours-from-dateTime($date),&apos;00&apos;),format-number(minutes-from-dateTime($date),&apos;00&apos;),format-number(floor(seconds-from-dateTime($date)),&apos;00&apos;))&quot; /&gt;
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted date --&gt;
&lt;xsl:template name=&quot;hl7Date&quot;&gt;
	&lt;xsl:param name=&quot;date&quot; /&gt;
	&lt;xsl:if test=&quot;string($date) != &apos;&apos;&quot;&gt;
		&lt;xsl:choose&gt;
			&lt;xsl:when test=&quot;contains(string($date),&apos;T&apos;)&quot;&gt;
				&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
					&lt;xsl:with-param name=&quot;date&quot; select=&quot;xs:date(substring-before($date,&apos;T&apos;))&quot; /&gt;
				&lt;/xsl:call-template&gt;
			&lt;/xsl:when&gt;
			&lt;xsl:otherwise&gt;
					&lt;xsl:value-of select=&quot;concat(year-from-date($date),format-number(month-from-date($date),&apos;00&apos;),format-number(day-from-date($date),&apos;00&apos;))&quot; /&gt;
			&lt;/xsl:otherwise&gt;
		&lt;/xsl:choose&gt;				
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted time --&gt;
&lt;xsl:template name=&quot;hl7Time&quot;&gt;
	&lt;xsl:param name=&quot;time&quot; /&gt;
	&lt;xsl:if test=&quot;$time != &apos;&apos;&quot;&gt;
		&lt;xsl:value-of select=&quot;concat(format-number(hours-from-time($time),&apos;00&apos;),format-number(minutes-from-time($time),&apos;00&apos;),format-number(floor(seconds-from-time($time)),&apos;00&apos;))&quot; /&gt;
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;" creator="1" date_created="2006-07-18 11:02:38.0" changed_by="1954" date_changed="2007-05-26 15:40:56.0" retired="true" retired_by="1128" date_retired="2007-01-31 11:33:51.0" retired_reason="Don&apos;t want to show" guid="4e7c1dc2-26fe-102b-80cb-0017a47871b2"/>
  <form form_id="2" name="OLD - DONNEES DE BASE (RWANDA)" version="0.3" build="79" published="0" description="DONNEES DE BASE - Intake Form for Inshuiti Mu Buzima (Programme TB / VIH)" encounter_type="1" template="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;?mso-infoPathSolution name=&quot;OLD - DONNEES DE BASE (RWANDA)&quot; href=&quot;http://rwanda.pih-emr.org/openmrs/moduleServlet/formentry/forms/2.xsn&quot; solutionVersion=&quot;0.3.0.79&quot; productVersion=&quot;11.0.6357&quot; PIVersion=&quot;1.0.0.0&quot; ?&gt;&lt;?mso-application progid=&quot;InfoPath.Document&quot;?&gt;&lt;form xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xd=&quot;http://schemas.microsoft.com/office/infopath/2003&quot; xmlns:openmrs=&quot;http://rwanda.pih-emr.org/openmrs/moduleServlet/formentry/forms/schema/2-79&quot; id=&quot;2&quot; name=&quot;OLD - DONNEES DE BASE (RWANDA)&quot; version=&quot;0.3&quot;&gt;
  &lt;header&gt;
    &lt;enterer&gt;$!{enterer}&lt;/enterer&gt;
    &lt;date_entered&gt;$!{dateEntered}&lt;/date_entered&gt;
    &lt;session&gt;$!{sessionId}&lt;/session&gt;
    &lt;uid&gt;$!{uid}&lt;/uid&gt;
  &lt;/header&gt;
  &lt;patient&gt;
    &lt;patient.patient_id openmrs_attribute=&quot;patient_id&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getPatientId()}&lt;/patient.patient_id&gt;
    &lt;patient.family_name openmrs_attribute=&quot;family_name&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getFamilyName()}&lt;/patient.family_name&gt;
    &lt;patient.given_name openmrs_attribute=&quot;given_name&quot; openmrs_table=&quot;patient_name&quot;&gt;$!{patient.getGivenName()}&lt;/patient.given_name&gt;
    &lt;patient.middle_name openmrs_attribute=&quot;middle_name&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getMiddleName()}&lt;/patient.middle_name&gt;
    &lt;patient.sex openmrs_attribute=&quot;sex&quot; openmrs_table=&quot;patient&quot;/&gt;
    &lt;patient.birthplace openmrs_attribute=&quot;birthplace&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getBirthplace()}&lt;/patient.birthplace&gt;
    &lt;patient.medical_record_number openmrs_attribute=&quot;identifier&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{patient.getPatientIdentifier().getIdentifier()}&lt;/patient.medical_record_number&gt;
    &lt;patient_address.address1 openmrs_attribute=&quot;address1&quot; openmrs_table=&quot;patient_address&quot;&gt;$!{patient.getPersonAddress().getAddress1()}&lt;/patient_address.address1&gt;
    &lt;patient.tracnet_id_number openmrs_attribute=&quot;identifier&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{patient.getPatientIdentifier(&quot;TRACnet ID&quot;).getIdentifier()}&lt;/patient.tracnet_id_number&gt;
    &lt;patient.birthdate openmrs_attribute=&quot;birthdate&quot; openmrs_table=&quot;patient&quot;&gt;$!{date.format($patient.getBirthdate())}&lt;/patient.birthdate&gt;
    &lt;patient_address.address2 openmrs_attribute=&quot;address2&quot; openmrs_table=&quot;patient_address&quot;&gt;$!{patient.getPersonAddress().getAddress2()}&lt;/patient_address.address2&gt;
    &lt;patient.identity_card_id openmrs_attribute=&quot;identifier&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{patient.getPatientIdentifier(&quot;Carte d&apos;Identit&quot;).getIdentifier()}&lt;/patient.identity_card_id&gt;
    &lt;patient_address.city_village openmrs_attribute=&quot;CITY_VILLAGE&quot; openmrs_table=&quot;PATIENT_ADDRESS&quot;&gt;$!{patient.getPersonAddress().getCityVillage()}&lt;/patient_address.city_village&gt;
    &lt;patient_address.state_province openmrs_attribute=&quot;STATE_PROVINCE&quot; openmrs_table=&quot;PATIENT_ADDRESS&quot;&gt;$!{patient.getPersonAddress().getStateProvince()}&lt;/patient_address.state_province&gt;
  &lt;/patient&gt;
  &lt;encounter&gt;
    &lt;encounter.provider_id openmrs_attribute=&quot;provider_id&quot; openmrs_table=&quot;encounter&quot;/&gt;
    &lt;encounter.encounter_datetime openmrs_attribute=&quot;encounter_datetime&quot; openmrs_table=&quot;encounter&quot;/&gt;
    &lt;encounter.location_id openmrs_attribute=&quot;location_id&quot; openmrs_table=&quot;encounter&quot;/&gt;
  &lt;/encounter&gt;
  &lt;obs openmrs_concept=&quot;1238^MEDICAL RECORD OBSERVATIONS^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
    &lt;presenting_history openmrs_concept=&quot;974^PRESENTING HISTORY^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/presenting_history&gt;
    &lt;previous_diagnosis_construct openmrs_concept=&quot;991^PREVIOUS DIAGNOSIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_diagnosis multiple=&quot;0&quot; openmrs_concept=&quot;992^PREVIOUS DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis&gt;
      &lt;previous_diagnosis_absent multiple=&quot;0&quot; openmrs_concept=&quot;997^PREVIOUS DIAGNOSIS ABSENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_absent&gt;
      &lt;previous_diagnosis_date openmrs_concept=&quot;999^PREVIOUS DIAGNOSIS DATE^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_date&gt;
      &lt;previous_diagnosis_comments openmrs_concept=&quot;1249^PREVIOUS DIAGNOSIS COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_comments&gt;
    &lt;/previous_diagnosis_construct&gt;
    &lt;previous_diagnosis_construct_1 openmrs_concept=&quot;991^PREVIOUS DIAGNOSIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_diagnosis multiple=&quot;0&quot; openmrs_concept=&quot;992^PREVIOUS DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis&gt;
      &lt;previous_diagnosis_absent multiple=&quot;0&quot; openmrs_concept=&quot;997^PREVIOUS DIAGNOSIS ABSENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_absent&gt;
      &lt;previous_diagnosis_date openmrs_concept=&quot;999^PREVIOUS DIAGNOSIS DATE^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_date&gt;
      &lt;previous_diagnosis_comments openmrs_concept=&quot;1249^PREVIOUS DIAGNOSIS COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_comments&gt;
    &lt;/previous_diagnosis_construct_1&gt;
    &lt;previous_diagnosis_construct_2 openmrs_concept=&quot;991^PREVIOUS DIAGNOSIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_diagnosis multiple=&quot;0&quot; openmrs_concept=&quot;992^PREVIOUS DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis&gt;
      &lt;previous_diagnosis_absent multiple=&quot;0&quot; openmrs_concept=&quot;997^PREVIOUS DIAGNOSIS ABSENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_absent&gt;
      &lt;previous_diagnosis_date openmrs_concept=&quot;999^PREVIOUS DIAGNOSIS DATE^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_date&gt;
      &lt;previous_diagnosis_comments openmrs_concept=&quot;1249^PREVIOUS DIAGNOSIS COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_comments&gt;
    &lt;/previous_diagnosis_construct_2&gt;
    &lt;previous_diagnosis_construct_3 openmrs_concept=&quot;991^PREVIOUS DIAGNOSIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_diagnosis multiple=&quot;0&quot; openmrs_concept=&quot;992^PREVIOUS DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis&gt;
      &lt;previous_diagnosis_absent multiple=&quot;0&quot; openmrs_concept=&quot;997^PREVIOUS DIAGNOSIS ABSENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_absent&gt;
      &lt;previous_diagnosis_date openmrs_concept=&quot;999^PREVIOUS DIAGNOSIS DATE^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_date&gt;
      &lt;previous_diagnosis_comments openmrs_concept=&quot;1249^PREVIOUS DIAGNOSIS COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_comments&gt;
    &lt;/previous_diagnosis_construct_3&gt;
    &lt;previous_diagnosis_construct_4 openmrs_concept=&quot;991^PREVIOUS DIAGNOSIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_diagnosis multiple=&quot;0&quot; openmrs_concept=&quot;992^PREVIOUS DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis&gt;
      &lt;previous_diagnosis_absent multiple=&quot;0&quot; openmrs_concept=&quot;997^PREVIOUS DIAGNOSIS ABSENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_absent&gt;
      &lt;previous_diagnosis_date openmrs_concept=&quot;999^PREVIOUS DIAGNOSIS DATE^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_date&gt;
      &lt;previous_diagnosis_comments openmrs_concept=&quot;1249^PREVIOUS DIAGNOSIS COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_comments&gt;
    &lt;/previous_diagnosis_construct_4&gt;
    &lt;previous_diagnosis_construct_5 openmrs_concept=&quot;991^PREVIOUS DIAGNOSIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_diagnosis multiple=&quot;0&quot; openmrs_concept=&quot;992^PREVIOUS DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis&gt;
      &lt;previous_diagnosis_absent multiple=&quot;0&quot; openmrs_concept=&quot;997^PREVIOUS DIAGNOSIS ABSENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_absent&gt;
      &lt;previous_diagnosis_date openmrs_concept=&quot;999^PREVIOUS DIAGNOSIS DATE^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_date&gt;
      &lt;previous_diagnosis_comments openmrs_concept=&quot;1249^PREVIOUS DIAGNOSIS COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_comments&gt;
    &lt;/previous_diagnosis_construct_5&gt;
    &lt;previous_diagnosis_construct_6 openmrs_concept=&quot;991^PREVIOUS DIAGNOSIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_diagnosis multiple=&quot;0&quot; openmrs_concept=&quot;992^PREVIOUS DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis&gt;
      &lt;previous_diagnosis_absent multiple=&quot;0&quot; openmrs_concept=&quot;997^PREVIOUS DIAGNOSIS ABSENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_absent&gt;
      &lt;previous_diagnosis_date openmrs_concept=&quot;999^PREVIOUS DIAGNOSIS DATE^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_date&gt;
      &lt;previous_diagnosis_comments openmrs_concept=&quot;1249^PREVIOUS DIAGNOSIS COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_comments&gt;
    &lt;/previous_diagnosis_construct_6&gt;
    &lt;previous_diagnosis_construct_7 openmrs_concept=&quot;991^PREVIOUS DIAGNOSIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_diagnosis multiple=&quot;0&quot; openmrs_concept=&quot;992^PREVIOUS DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis&gt;
      &lt;previous_diagnosis_absent multiple=&quot;0&quot; openmrs_concept=&quot;997^PREVIOUS DIAGNOSIS ABSENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_absent&gt;
      &lt;previous_diagnosis_date openmrs_concept=&quot;999^PREVIOUS DIAGNOSIS DATE^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_date&gt;
      &lt;previous_diagnosis_comments openmrs_concept=&quot;1249^PREVIOUS DIAGNOSIS COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_comments&gt;
    &lt;/previous_diagnosis_construct_7&gt;
    &lt;previous_diagnosis_construct_8 openmrs_concept=&quot;991^PREVIOUS DIAGNOSIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_diagnosis multiple=&quot;0&quot; openmrs_concept=&quot;992^PREVIOUS DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis&gt;
      &lt;previous_diagnosis_absent multiple=&quot;0&quot; openmrs_concept=&quot;997^PREVIOUS DIAGNOSIS ABSENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_absent&gt;
      &lt;previous_diagnosis_date openmrs_concept=&quot;999^PREVIOUS DIAGNOSIS DATE^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_date&gt;
      &lt;previous_diagnosis_comments openmrs_concept=&quot;1249^PREVIOUS DIAGNOSIS COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_comments&gt;
    &lt;/previous_diagnosis_construct_8&gt;
    &lt;previous_diagnosis_construct_9 openmrs_concept=&quot;991^PREVIOUS DIAGNOSIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_diagnosis multiple=&quot;0&quot; openmrs_concept=&quot;992^PREVIOUS DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis&gt;
      &lt;previous_diagnosis_absent multiple=&quot;0&quot; openmrs_concept=&quot;997^PREVIOUS DIAGNOSIS ABSENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_absent&gt;
      &lt;previous_diagnosis_date openmrs_concept=&quot;999^PREVIOUS DIAGNOSIS DATE^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_date&gt;
      &lt;previous_diagnosis_comments openmrs_concept=&quot;1249^PREVIOUS DIAGNOSIS COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_comments&gt;
    &lt;/previous_diagnosis_construct_9&gt;
    &lt;previous_diagnosis_construct_10 openmrs_concept=&quot;991^PREVIOUS DIAGNOSIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_diagnosis multiple=&quot;0&quot; openmrs_concept=&quot;992^PREVIOUS DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis&gt;
      &lt;previous_diagnosis_absent multiple=&quot;0&quot; openmrs_concept=&quot;997^PREVIOUS DIAGNOSIS ABSENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_absent&gt;
      &lt;previous_diagnosis_date openmrs_concept=&quot;999^PREVIOUS DIAGNOSIS DATE^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_date&gt;
      &lt;previous_diagnosis_comments openmrs_concept=&quot;1249^PREVIOUS DIAGNOSIS COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_comments&gt;
    &lt;/previous_diagnosis_construct_10&gt;
    &lt;previous_diagnosis_construct_11 openmrs_concept=&quot;991^PREVIOUS DIAGNOSIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_diagnosis multiple=&quot;0&quot; openmrs_concept=&quot;992^PREVIOUS DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis&gt;
      &lt;previous_diagnosis_absent multiple=&quot;0&quot; openmrs_concept=&quot;997^PREVIOUS DIAGNOSIS ABSENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_absent&gt;
      &lt;previous_diagnosis_date openmrs_concept=&quot;999^PREVIOUS DIAGNOSIS DATE^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_date&gt;
      &lt;previous_diagnosis_comments openmrs_concept=&quot;1249^PREVIOUS DIAGNOSIS COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_comments&gt;
    &lt;/previous_diagnosis_construct_11&gt;
    &lt;previous_diagnosis_construct_12 openmrs_concept=&quot;991^PREVIOUS DIAGNOSIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_diagnosis multiple=&quot;0&quot; openmrs_concept=&quot;992^PREVIOUS DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis&gt;
      &lt;previous_diagnosis_absent multiple=&quot;0&quot; openmrs_concept=&quot;997^PREVIOUS DIAGNOSIS ABSENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_absent&gt;
      &lt;previous_diagnosis_date openmrs_concept=&quot;999^PREVIOUS DIAGNOSIS DATE^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_date&gt;
      &lt;previous_diagnosis_comments openmrs_concept=&quot;1249^PREVIOUS DIAGNOSIS COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_comments&gt;
    &lt;/previous_diagnosis_construct_12&gt;
    &lt;previous_diagnosis_construct_13 openmrs_concept=&quot;991^PREVIOUS DIAGNOSIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_diagnosis multiple=&quot;0&quot; openmrs_concept=&quot;992^PREVIOUS DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis&gt;
      &lt;previous_diagnosis_absent multiple=&quot;0&quot; openmrs_concept=&quot;997^PREVIOUS DIAGNOSIS ABSENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_absent&gt;
      &lt;previous_diagnosis_date openmrs_concept=&quot;999^PREVIOUS DIAGNOSIS DATE^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_date&gt;
      &lt;previous_diagnosis_comments openmrs_concept=&quot;1249^PREVIOUS DIAGNOSIS COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_comments&gt;
    &lt;/previous_diagnosis_construct_13&gt;
    &lt;previous_diagnosis_construct_14 openmrs_concept=&quot;991^PREVIOUS DIAGNOSIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_diagnosis multiple=&quot;0&quot; openmrs_concept=&quot;992^PREVIOUS DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis&gt;
      &lt;previous_diagnosis_absent multiple=&quot;0&quot; openmrs_concept=&quot;997^PREVIOUS DIAGNOSIS ABSENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_absent&gt;
      &lt;previous_diagnosis_date openmrs_concept=&quot;999^PREVIOUS DIAGNOSIS DATE^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_date&gt;
      &lt;previous_diagnosis_comments openmrs_concept=&quot;1249^PREVIOUS DIAGNOSIS COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_comments&gt;
    &lt;/previous_diagnosis_construct_14&gt;
    &lt;previous_diagnosis_construct_15 openmrs_concept=&quot;991^PREVIOUS DIAGNOSIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_diagnosis multiple=&quot;0&quot; openmrs_concept=&quot;992^PREVIOUS DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis&gt;
      &lt;previous_diagnosis_absent multiple=&quot;0&quot; openmrs_concept=&quot;997^PREVIOUS DIAGNOSIS ABSENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_absent&gt;
      &lt;previous_diagnosis_date openmrs_concept=&quot;999^PREVIOUS DIAGNOSIS DATE^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_date&gt;
      &lt;previous_diagnosis_comments openmrs_concept=&quot;1249^PREVIOUS DIAGNOSIS COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_diagnosis_comments&gt;
    &lt;/previous_diagnosis_construct_15&gt;
    &lt;ever_had_active_tuberculosis openmrs_concept=&quot;1546^EVER HAD ACTIVE TUBERCULOSIS^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/ever_had_active_tuberculosis&gt;
    &lt;extra-pulmonary_tuberculosis openmrs_concept=&quot;1547^EXTRA-PULMONARY TUBERCULOSIS^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/extra-pulmonary_tuberculosis&gt;
    &lt;pulmonary_tuberculosis openmrs_concept=&quot;1549^PULMONARY TUBERCULOSIS^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/pulmonary_tuberculosis&gt;
    &lt;tb_drug_sensitivity_testing_result openmrs_concept=&quot;988^TB DRUG SENSITIVITY TESTING RESULT^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/tb_drug_sensitivity_testing_result&gt;
    &lt;tb_status_drug_resistance openmrs_concept=&quot;1474^TB STATUS DRUG RESISTANCE^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/tb_status_drug_resistance&gt;
    &lt;allergy_construct openmrs_concept=&quot;1295^ADVERSE EFFECT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;adverse_effect_medication multiple=&quot;0&quot; openmrs_concept=&quot;1296^ADVERSE EFFECT MEDICATION^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/adverse_effect_medication&gt;
      &lt;adverse_effect multiple=&quot;1&quot; openmrs_concept=&quot;1297^ADVERSE EFFECT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;anemia openmrs_concept=&quot;3^ANEMIA^99DCT&quot;&gt;false&lt;/anemia&gt;
            &lt;other_non-coded openmrs_concept=&quot;5622^OTHER NON-CODED^99DCT&quot;&gt;false&lt;/other_non-coded&gt;
            &lt;lactic_acidosis openmrs_concept=&quot;1458^LACTIC ACIDOSIS^99DCT&quot;&gt;false&lt;/lactic_acidosis&gt;
            &lt;rash_minor openmrs_concept=&quot;1726^RASH, MINOR^99DCT&quot;&gt;false&lt;/rash_minor&gt;
            &lt;peripheral_neuropathy openmrs_concept=&quot;821^PERIPHERAL NEUROPATHY^99DCT&quot;&gt;false&lt;/peripheral_neuropathy&gt;
            &lt;jaundice openmrs_concept=&quot;215^JAUNDICE^99DCT&quot;&gt;false&lt;/jaundice&gt;
            &lt;nightmares openmrs_concept=&quot;2150^NIGHTMARES^99DCT&quot;&gt;false&lt;/nightmares&gt;
            &lt;none openmrs_concept=&quot;1107^NONE^99DCT&quot;&gt;false&lt;/none&gt;
            &lt;rash_severe openmrs_concept=&quot;1728^RASH, SEVERE^99DCT&quot;&gt;false&lt;/rash_severe&gt;
            &lt;joint_pain openmrs_concept=&quot;80^JOINT PAIN^99DCT&quot;&gt;false&lt;/joint_pain&gt;
            &lt;vomiting openmrs_concept=&quot;5980^VOMITING^99DCT&quot;&gt;false&lt;/vomiting&gt;
            &lt;nausea openmrs_concept=&quot;5978^NAUSEA^99DCT&quot;&gt;false&lt;/nausea&gt;
            &lt;hepatitis openmrs_concept=&quot;29^HEPATITIS^99DCT&quot;&gt;false&lt;/hepatitis&gt;
            &lt;lipodystrophy openmrs_concept=&quot;2148^LIPODYSTROPHY^99DCT&quot;&gt;false&lt;/lipodystrophy&gt;
            &lt;rash openmrs_concept=&quot;512^RASH^99DCT&quot;&gt;false&lt;/rash&gt;
            &lt;angio-edema openmrs_concept=&quot;1298^ANGIO-EDEMA^99DCT&quot;&gt;false&lt;/angio-edema&gt;
            &lt;anaphylaxis openmrs_concept=&quot;998^ANAPHYLAXIS^99DCT&quot;&gt;false&lt;/anaphylaxis&gt;
            &lt;rash_moderate openmrs_concept=&quot;1727^RASH, MODERATE^99DCT&quot;&gt;false&lt;/rash_moderate&gt;
      &lt;/adverse_effect&gt;
      &lt;adverse_effect_date openmrs_concept=&quot;1300^ADVERSE EFFECT DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/adverse_effect_date&gt;
    &lt;/allergy_construct&gt;
    &lt;allergy_construct_1 openmrs_concept=&quot;1295^ADVERSE EFFECT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;adverse_effect_medication multiple=&quot;0&quot; openmrs_concept=&quot;1296^ADVERSE EFFECT MEDICATION^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/adverse_effect_medication&gt;
      &lt;adverse_effect multiple=&quot;1&quot; openmrs_concept=&quot;1297^ADVERSE EFFECT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;anemia openmrs_concept=&quot;3^ANEMIA^99DCT&quot;&gt;false&lt;/anemia&gt;
            &lt;other_non-coded openmrs_concept=&quot;5622^OTHER NON-CODED^99DCT&quot;&gt;false&lt;/other_non-coded&gt;
            &lt;lactic_acidosis openmrs_concept=&quot;1458^LACTIC ACIDOSIS^99DCT&quot;&gt;false&lt;/lactic_acidosis&gt;
            &lt;rash_minor openmrs_concept=&quot;1726^RASH, MINOR^99DCT&quot;&gt;false&lt;/rash_minor&gt;
            &lt;peripheral_neuropathy openmrs_concept=&quot;821^PERIPHERAL NEUROPATHY^99DCT&quot;&gt;false&lt;/peripheral_neuropathy&gt;
            &lt;jaundice openmrs_concept=&quot;215^JAUNDICE^99DCT&quot;&gt;false&lt;/jaundice&gt;
            &lt;nightmares openmrs_concept=&quot;2150^NIGHTMARES^99DCT&quot;&gt;false&lt;/nightmares&gt;
            &lt;none openmrs_concept=&quot;1107^NONE^99DCT&quot;&gt;false&lt;/none&gt;
            &lt;rash_severe openmrs_concept=&quot;1728^RASH, SEVERE^99DCT&quot;&gt;false&lt;/rash_severe&gt;
            &lt;joint_pain openmrs_concept=&quot;80^JOINT PAIN^99DCT&quot;&gt;false&lt;/joint_pain&gt;
            &lt;vomiting openmrs_concept=&quot;5980^VOMITING^99DCT&quot;&gt;false&lt;/vomiting&gt;
            &lt;nausea openmrs_concept=&quot;5978^NAUSEA^99DCT&quot;&gt;false&lt;/nausea&gt;
            &lt;hepatitis openmrs_concept=&quot;29^HEPATITIS^99DCT&quot;&gt;false&lt;/hepatitis&gt;
            &lt;lipodystrophy openmrs_concept=&quot;2148^LIPODYSTROPHY^99DCT&quot;&gt;false&lt;/lipodystrophy&gt;
            &lt;rash openmrs_concept=&quot;512^RASH^99DCT&quot;&gt;false&lt;/rash&gt;
            &lt;angio-edema openmrs_concept=&quot;1298^ANGIO-EDEMA^99DCT&quot;&gt;false&lt;/angio-edema&gt;
            &lt;anaphylaxis openmrs_concept=&quot;998^ANAPHYLAXIS^99DCT&quot;&gt;false&lt;/anaphylaxis&gt;
            &lt;rash_moderate openmrs_concept=&quot;1727^RASH, MODERATE^99DCT&quot;&gt;false&lt;/rash_moderate&gt;
      &lt;/adverse_effect&gt;
      &lt;adverse_effect_date openmrs_concept=&quot;1300^ADVERSE EFFECT DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/adverse_effect_date&gt;
    &lt;/allergy_construct_1&gt;
    &lt;allergy_construct_2 openmrs_concept=&quot;1295^ADVERSE EFFECT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;adverse_effect_medication multiple=&quot;0&quot; openmrs_concept=&quot;1296^ADVERSE EFFECT MEDICATION^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/adverse_effect_medication&gt;
      &lt;adverse_effect multiple=&quot;1&quot; openmrs_concept=&quot;1297^ADVERSE EFFECT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;anemia openmrs_concept=&quot;3^ANEMIA^99DCT&quot;&gt;false&lt;/anemia&gt;
            &lt;other_non-coded openmrs_concept=&quot;5622^OTHER NON-CODED^99DCT&quot;&gt;false&lt;/other_non-coded&gt;
            &lt;lactic_acidosis openmrs_concept=&quot;1458^LACTIC ACIDOSIS^99DCT&quot;&gt;false&lt;/lactic_acidosis&gt;
            &lt;rash_minor openmrs_concept=&quot;1726^RASH, MINOR^99DCT&quot;&gt;false&lt;/rash_minor&gt;
            &lt;peripheral_neuropathy openmrs_concept=&quot;821^PERIPHERAL NEUROPATHY^99DCT&quot;&gt;false&lt;/peripheral_neuropathy&gt;
            &lt;jaundice openmrs_concept=&quot;215^JAUNDICE^99DCT&quot;&gt;false&lt;/jaundice&gt;
            &lt;nightmares openmrs_concept=&quot;2150^NIGHTMARES^99DCT&quot;&gt;false&lt;/nightmares&gt;
            &lt;none openmrs_concept=&quot;1107^NONE^99DCT&quot;&gt;false&lt;/none&gt;
            &lt;rash_severe openmrs_concept=&quot;1728^RASH, SEVERE^99DCT&quot;&gt;false&lt;/rash_severe&gt;
            &lt;joint_pain openmrs_concept=&quot;80^JOINT PAIN^99DCT&quot;&gt;false&lt;/joint_pain&gt;
            &lt;vomiting openmrs_concept=&quot;5980^VOMITING^99DCT&quot;&gt;false&lt;/vomiting&gt;
            &lt;nausea openmrs_concept=&quot;5978^NAUSEA^99DCT&quot;&gt;false&lt;/nausea&gt;
            &lt;hepatitis openmrs_concept=&quot;29^HEPATITIS^99DCT&quot;&gt;false&lt;/hepatitis&gt;
            &lt;lipodystrophy openmrs_concept=&quot;2148^LIPODYSTROPHY^99DCT&quot;&gt;false&lt;/lipodystrophy&gt;
            &lt;rash openmrs_concept=&quot;512^RASH^99DCT&quot;&gt;false&lt;/rash&gt;
            &lt;angio-edema openmrs_concept=&quot;1298^ANGIO-EDEMA^99DCT&quot;&gt;false&lt;/angio-edema&gt;
            &lt;anaphylaxis openmrs_concept=&quot;998^ANAPHYLAXIS^99DCT&quot;&gt;false&lt;/anaphylaxis&gt;
            &lt;rash_moderate openmrs_concept=&quot;1727^RASH, MODERATE^99DCT&quot;&gt;false&lt;/rash_moderate&gt;
      &lt;/adverse_effect&gt;
      &lt;adverse_effect_date openmrs_concept=&quot;1300^ADVERSE EFFECT DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/adverse_effect_date&gt;
    &lt;/allergy_construct_2&gt;
    &lt;previous_other_medication_construct openmrs_concept=&quot;1558^PREVIOUS OTHER MEDICATION CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;other_medication_1 openmrs_concept=&quot;1554^OTHER MEDICATION 1^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/other_medication_1&gt;
      &lt;other_medication_2 openmrs_concept=&quot;1555^OTHER MEDICATION 2^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/other_medication_2&gt;
      &lt;other_medication_3 openmrs_concept=&quot;1556^OTHER MEDICATION 3^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/other_medication_3&gt;
      &lt;other_medication_4 openmrs_concept=&quot;1557^OTHER MEDICATION 4^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/other_medication_4&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_other_medication_construct&gt;
    &lt;previous_treatment_history_hiv_construct openmrs_concept=&quot;1590^PREVIOUS TREATMENT HISTORY HIV CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_history_hiv multiple=&quot;0&quot; openmrs_concept=&quot;1508^PREVIOUS TREATMENT HISTORY HIV^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_history_hiv&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_history_hiv_construct&gt;
    &lt;previous_treatment_history_tb_construct openmrs_concept=&quot;1515^PREVIOUS TREATMENT HISTORY TB CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_history_tb multiple=&quot;0&quot; openmrs_concept=&quot;1514^PREVIOUS TREATMENT HISTORY TB^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_history_tb&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_history_tb_construct&gt;
    &lt;previous_treatment_prophylaxis_construct openmrs_concept=&quot;1501^PREVIOUS TREATMENT PROPHYLAXIS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_prophylaxis multiple=&quot;0&quot; openmrs_concept=&quot;1498^PREVIOUS TREATMENT PROPHYLAXIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_prophylaxis&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_prophylaxis_construct&gt;
    &lt;functional_review_of_symptoms_construct openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct&gt;
    &lt;functional_review_of_symptoms_construct_1 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_1&gt;
    &lt;functional_review_of_symptoms_construct_2 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_2&gt;
    &lt;functional_review_of_symptoms_construct_3 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_3&gt;
    &lt;functional_review_of_symptoms_construct_4 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_4&gt;
    &lt;functional_review_of_symptoms_construct_5 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_5&gt;
    &lt;functional_review_of_symptoms_construct_6 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_6&gt;
    &lt;functional_review_of_symptoms_construct_7 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_7&gt;
    &lt;functional_review_of_symptoms_construct_8 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_8&gt;
    &lt;functional_review_of_symptoms_construct_9 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_9&gt;
    &lt;functional_review_of_symptoms_construct_10 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_10&gt;
    &lt;functional_review_of_symptoms_construct_11 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_11&gt;
    &lt;functional_review_of_symptoms_construct_12 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_12&gt;
    &lt;diastolic_blood_pressure openmrs_concept=&quot;5086^DIASTOLIC BLOOD PRESSURE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/diastolic_blood_pressure&gt;
    &lt;pulse openmrs_concept=&quot;5087^PULSE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/pulse&gt;
    &lt;respiratory_rate openmrs_concept=&quot;5242^RESPIRATORY RATE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/respiratory_rate&gt;
    &lt;systolic_blood_pressure openmrs_concept=&quot;5085^SYSTOLIC BLOOD PRESSURE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/systolic_blood_pressure&gt;
    &lt;temperature_c openmrs_concept=&quot;5088^TEMPERATURE (C)^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/temperature_c&gt;
    &lt;height_cm openmrs_concept=&quot;5090^HEIGHT (CM)^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/height_cm&gt;
    &lt;weight_kg openmrs_concept=&quot;5089^WEIGHT (KG)^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/weight_kg&gt;
    &lt;physical_examination openmrs_concept=&quot;1336^PHYSICAL EXAMINATION^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/physical_examination&gt;
    &lt;hiv_rapid_test_qualitative multiple=&quot;0&quot; openmrs_concept=&quot;1040^HIV RAPID TEST, QUALITATIVE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/hiv_rapid_test_qualitative&gt;
    &lt;post_hiv_test_counseling multiple=&quot;0&quot; openmrs_concept=&quot;969^POST HIV TEST COUNSELING^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/post_hiv_test_counseling&gt;
    &lt;partner_referred_for_hiv_test multiple=&quot;0&quot; openmrs_concept=&quot;967^PARTNER REFERRED FOR HIV TEST^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/partner_referred_for_hiv_test&gt;
    &lt;date_of_last_menstrual_period openmrs_concept=&quot;968^DATE OF LAST MENSTRUAL PERIOD^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/date_of_last_menstrual_period&gt;
    &lt;estimated_date_of_confinement openmrs_concept=&quot;5596^ESTIMATED DATE OF CONFINEMENT^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/estimated_date_of_confinement&gt;
    &lt;pregnancy_status multiple=&quot;0&quot; openmrs_concept=&quot;5272^PREGNANCY STATUS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/pregnancy_status&gt;
    &lt;afb_sputum_smear multiple=&quot;0&quot; openmrs_concept=&quot;1444^AFB SPUTUM SMEAR^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/afb_sputum_smear&gt;
    &lt;afb_sputum_smear_1 multiple=&quot;0&quot; openmrs_concept=&quot;1444^AFB SPUTUM SMEAR^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/afb_sputum_smear_1&gt;
    &lt;afb_sputum_smear_2 multiple=&quot;0&quot; openmrs_concept=&quot;1444^AFB SPUTUM SMEAR^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/afb_sputum_smear_2&gt;
    &lt;blood_urea_nitrogen openmrs_concept=&quot;857^BLOOD UREA NITROGEN^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/blood_urea_nitrogen&gt;
    &lt;cd4_count openmrs_concept=&quot;5497^CD4 COUNT^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/cd4_count&gt;
    &lt;cd4_percent openmrs_concept=&quot;730^CD4%^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/cd4_percent&gt;
    &lt;culture_for_tuberculosis_general multiple=&quot;0&quot; openmrs_concept=&quot;1436^CULTURE FOR TUBERCULOSIS, GENERAL^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/culture_for_tuberculosis_general&gt;
    &lt;esr openmrs_concept=&quot;1477^ESR^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/esr&gt;
    &lt;hematocrit openmrs_concept=&quot;1015^HEMATOCRIT^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/hematocrit&gt;
    &lt;hemoglobin openmrs_concept=&quot;21^HEMOGLOBIN^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/hemoglobin&gt;
    &lt;hiv_pcr openmrs_concept=&quot;1553^HIV PCR^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/hiv_pcr&gt;
    &lt;hiv_viral_load openmrs_concept=&quot;856^HIV VIRAL LOAD^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/hiv_viral_load&gt;
    &lt;laboratory_tests_other openmrs_concept=&quot;1341^LABORATORY TESTS OTHER^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/laboratory_tests_other&gt;
    &lt;lymphocytes openmrs_concept=&quot;1021^LYMPHOCYTES^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/lymphocytes&gt;
    &lt;malarial_smear multiple=&quot;0&quot; openmrs_concept=&quot;32^MALARIAL SMEAR^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/malarial_smear&gt;
    &lt;neutrophils openmrs_concept=&quot;1022^NEUTROPHILS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/neutrophils&gt;
    &lt;other_tb_culture_source_non-coded openmrs_concept=&quot;1596^OTHER TB CULTURE SOURCE NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/other_tb_culture_source_non-coded&gt;
    &lt;platelets openmrs_concept=&quot;729^PLATELETS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/platelets&gt;
    &lt;ppd_construct openmrs_concept=&quot;1438^PPD CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;ppd_qualitative multiple=&quot;0&quot; openmrs_concept=&quot;1435^PPD, QUALITATIVE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/ppd_qualitative&gt;
      &lt;ppd_quantitative openmrs_concept=&quot;1437^PPD, QUANTITATIVE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/ppd_quantitative&gt;
    &lt;/ppd_construct&gt;
    &lt;rapid_plasmin_reagent multiple=&quot;0&quot; openmrs_concept=&quot;1478^RAPID PLASMIN REAGENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/rapid_plasmin_reagent&gt;
    &lt;serum_creatinine openmrs_concept=&quot;790^SERUM CREATININE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/serum_creatinine&gt;
    &lt;serum_glucose openmrs_concept=&quot;887^SERUM GLUCOSE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/serum_glucose&gt;
    &lt;serum_glutamic-oxaloacetic_transaminase openmrs_concept=&quot;653^SERUM GLUTAMIC-OXALOACETIC TRANSAMINASE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/serum_glutamic-oxaloacetic_transaminase&gt;
    &lt;serum_glutamic-pyruvic_transaminase openmrs_concept=&quot;654^SERUM GLUTAMIC-PYRUVIC TRANSAMINASE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/serum_glutamic-pyruvic_transaminase&gt;
    &lt;sexually_transmitted_disease_other openmrs_concept=&quot;1374^SEXUALLY TRANSMITTED DISEASE OTHER^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/sexually_transmitted_disease_other&gt;
    &lt;tb_culture_source multiple=&quot;0&quot; openmrs_concept=&quot;1595^TB CULTURE SOURCE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/tb_culture_source&gt;
    &lt;tb_drug_resistance multiple=&quot;0&quot; openmrs_concept=&quot;1597^TB DRUG RESISTANCE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/tb_drug_resistance&gt;
    &lt;tb_drug_sensitivity_testing openmrs_concept=&quot;1339^TUBERCULOSIS DRUG SENSITIVITY TESTING, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/tb_drug_sensitivity_testing&gt;
    &lt;total_cholesterol openmrs_concept=&quot;1006^TOTAL CHOLESTEROL^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/total_cholesterol&gt;
    &lt;urinalysis openmrs_concept=&quot;1542^URINALYSIS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/urinalysis&gt;
    &lt;vaginal_smear openmrs_concept=&quot;1475^VAGINAL SMEAR^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/vaginal_smear&gt;
    &lt;white_blood_cells openmrs_concept=&quot;678^WHITE BLOOD CELLS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/white_blood_cells&gt;
    &lt;x-ray_chest multiple=&quot;1&quot; openmrs_concept=&quot;12^X-RAY, CHEST^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;fibrosis openmrs_concept=&quot;2468^FIBROSIS^99DCT&quot;&gt;false&lt;/fibrosis&gt;
        &lt;pneumothorax openmrs_concept=&quot;2618^PNEUMOTHORAX^99DCT&quot;&gt;false&lt;/pneumothorax&gt;
        &lt;evidence_of_cardiac_enlargement openmrs_concept=&quot;5158^EVIDENCE OF CARDIAC ENLARGEMENT^99DCT&quot;&gt;false&lt;/evidence_of_cardiac_enlargement&gt;
        &lt;cavitary_lesion openmrs_concept=&quot;6052^CAVITARY LESION^99DCT&quot;&gt;false&lt;/cavitary_lesion&gt;
        &lt;lymphadenopathy openmrs_concept=&quot;161^LYMPHADENOPATHY^99DCT&quot;&gt;false&lt;/lymphadenopathy&gt;
        &lt;abnormal openmrs_concept=&quot;1116^ABNORMAL^99DCT&quot;&gt;false&lt;/abnormal&gt;
        &lt;miliary_changes openmrs_concept=&quot;1137^MILIARY CHANGES^99DCT&quot;&gt;false&lt;/miliary_changes&gt;
        &lt;diffuse_non-miliary_changes openmrs_concept=&quot;6050^DIFFUSE NON-MILIARY CHANGES^99DCT&quot;&gt;false&lt;/diffuse_non-miliary_changes&gt;
        &lt;indeterminate openmrs_concept=&quot;1138^INDETERMINATE^99DCT&quot;&gt;false&lt;/indeterminate&gt;
        &lt;pulmonary_effusion openmrs_concept=&quot;1136^PULMONARY EFFUSION^99DCT&quot;&gt;false&lt;/pulmonary_effusion&gt;
        &lt;unknown openmrs_concept=&quot;1067^UNKNOWN^99DCT&quot;&gt;false&lt;/unknown&gt;
        &lt;cavity openmrs_concept=&quot;2467^CAVITY^99DCT&quot;&gt;false&lt;/cavity&gt;
        &lt;pneumonothorax openmrs_concept=&quot;2469^PNEUMONOTHORAX^99DCT&quot;&gt;false&lt;/pneumonothorax&gt;
        &lt;infiltrate openmrs_concept=&quot;6049^INFILTRATE^99DCT&quot;&gt;false&lt;/infiltrate&gt;
        &lt;normal openmrs_concept=&quot;1115^NORMAL^99DCT&quot;&gt;false&lt;/normal&gt;
        &lt;other_non-coded openmrs_concept=&quot;5622^OTHER NON-CODED^99DCT&quot;&gt;false&lt;/other_non-coded&gt;
        &lt;not_done openmrs_concept=&quot;1118^NOT DONE^99DCT&quot;&gt;false&lt;/not_done&gt;
    &lt;/x-ray_chest&gt;
    &lt;chest_xray_comments openmrs_concept=&quot;1342^CHEST XRAY COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/chest_xray_comments&gt;
    &lt;clinical_impression_comments openmrs_concept=&quot;1364^CLINICAL IMPRESSION COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/clinical_impression_comments&gt;
    &lt;current_opportunistic_infection openmrs_concept=&quot;1401^CURRENT OPPORTUNISTIC INFECTION^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection&gt;
    &lt;who_stage multiple=&quot;0&quot; openmrs_concept=&quot;1480^WHO STAGE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/who_stage&gt;
    &lt;antiretrovirals_for_prevention_of_maternal_to_child_transmission openmrs_concept=&quot;1446^ANTIRETROVIRALS FOR PREVENTION OF MATERNAL TO CHILD TRANSMISSION^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/antiretrovirals_for_prevention_of_maternal_to_child_transmission&gt;
    &lt;is_the_patient_starting_arvs_for_prophylaxis openmrs_concept=&quot;1497^IS THE PATIENT STARTING ARVS FOR PROPHYLAXIS^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/is_the_patient_starting_arvs_for_prophylaxis&gt;
    &lt;reason_patient_started_arvs_for_prophylaxis multiple=&quot;0&quot; openmrs_concept=&quot;1496^REASON PATIENT STARTED ARVS FOR PROPHYLAXIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/reason_patient_started_arvs_for_prophylaxis&gt;
    &lt;does_the_patient_need_treatment_for_tuberculosis multiple=&quot;0&quot; openmrs_concept=&quot;1559^DOES THE PATIENT NEED TREATMENT FOR TUBERCULOSIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/does_the_patient_need_treatment_for_tuberculosis&gt;
    &lt;tuberculosis_drug_treatment_start_date openmrs_concept=&quot;1113^TUBERCULOSIS DRUG TREATMENT START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/tuberculosis_drug_treatment_start_date&gt;
    &lt;civil_status multiple=&quot;0&quot; openmrs_concept=&quot;1054^CIVIL STATUS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/civil_status&gt;
    &lt;patient_multiple_sexual_partners openmrs_concept=&quot;5567^PATIENT MULTIPLE SEXUAL PARTNERS^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/patient_multiple_sexual_partners&gt;
    &lt;patient_multiple_sexual_partners_comment openmrs_concept=&quot;1433^PATIENT MULTIPLE SEXUAL PARTNERS COMMENT^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/patient_multiple_sexual_partners_comment&gt;
    &lt;location_of_distant_sexual_partners openmrs_concept=&quot;1303^LOCATION OF DISTANT SEXUAL PARTNERS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/location_of_distant_sexual_partners&gt;
    &lt;multiple_sexual_partners_locally openmrs_concept=&quot;1302^MULTIPLE SEXUAL PARTNERS LOCALLY^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/multiple_sexual_partners_locally&gt;
    &lt;brief_history_of_previous_residences openmrs_concept=&quot;1434^BRIEF HISTORY OF PREVIOUS RESIDENCES^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/brief_history_of_previous_residences&gt;
    &lt;main_activity multiple=&quot;0&quot; openmrs_concept=&quot;1304^MAIN ACTIVITY^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/main_activity&gt;
    &lt;nutrition_evaluation multiple=&quot;0&quot; openmrs_concept=&quot;1310^NUTRITION EVALUATION^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/nutrition_evaluation&gt;
    &lt;number_of_people_who_live_in_house openmrs_concept=&quot;1323^NUMBER OF PEOPLE WHO LIVE IN HOUSE INCLUDING PATIENT^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/number_of_people_who_live_in_house&gt;
    &lt;number_of_rooms_in_house openmrs_concept=&quot;1324^NUMBER OF ROOMS IN HOUSE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/number_of_rooms_in_house&gt;
    &lt;roof_material multiple=&quot;0&quot; openmrs_concept=&quot;1319^ROOF MATERIAL^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/roof_material&gt;
    &lt;floor_material multiple=&quot;0&quot; openmrs_concept=&quot;1315^FLOOR MATERIAL^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/floor_material&gt;
    &lt;toilet openmrs_concept=&quot;1322^TOILET^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/toilet&gt;
    &lt;radio openmrs_concept=&quot;1318^PATIENT OWNS RADIO^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/radio&gt;
    &lt;years_of_school_completed openmrs_concept=&quot;5607^YEARS OF SCHOOL COMPLETED^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/years_of_school_completed&gt;
    &lt;how_did_the_patient_travel_to_clinic multiple=&quot;0&quot; openmrs_concept=&quot;975^HOW DID THE PATIENT TRAVEL TO CLINIC^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/how_did_the_patient_travel_to_clinic&gt;
    &lt;clinic_travel_time multiple=&quot;0&quot; openmrs_concept=&quot;5605^CLINIC TRAVEL TIME^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/clinic_travel_time&gt;
    &lt;primary_activity_before_illness openmrs_concept=&quot;1402^PRIMARY ACTIVITY BEFORE ILLNESS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/primary_activity_before_illness&gt;
    &lt;current_ability_to_perform_primary_activity_before_illness multiple=&quot;0&quot; openmrs_concept=&quot;1601^CURRENT ABILITY TO PERFORM PRIMARY ACTIVITY BEFORE ILLNESS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_ability_to_perform_primary_activity_before_illness&gt;
    &lt;other_activities_before_illness openmrs_concept=&quot;1604^OTHER ACTIVITIES BEFORE ILLNESS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/other_activities_before_illness&gt;
    &lt;current_ability_to_perform_other_activities_before_illness multiple=&quot;0&quot; openmrs_concept=&quot;1605^CURRENT ABILITY TO PERFORM OTHER ACTIVITIES BEFORE ILLNESS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_ability_to_perform_other_activities_before_illness&gt;
    &lt;financial_aid openmrs_concept=&quot;1398^FINANCIAL AID^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/financial_aid&gt;
    &lt;financial_aid_comment openmrs_concept=&quot;1516^FINANCIAL AID COMMENT^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/financial_aid_comment&gt;
    &lt;assistance_with_transport openmrs_concept=&quot;990^ASSISTANCE WITH TRANSPORT^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/assistance_with_transport&gt;
    &lt;assistance_with_transport_comment openmrs_concept=&quot;1520^ASSISTANCE WITH TRANSPORT COMMENT^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/assistance_with_transport_comment&gt;
    &lt;nutritional_aid openmrs_concept=&quot;1400^NUTRITIONAL AID^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/nutritional_aid&gt;
    &lt;nutritional_aid_comment openmrs_concept=&quot;1517^NUTRITIONAL AID COMMENT^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/nutritional_aid_comment&gt;
    &lt;aid_for_construction_or_repair_of_the_house openmrs_concept=&quot;1396^AID FOR CONSTRUCTION OR REPAIR OF THE HOUSE^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/aid_for_construction_or_repair_of_the_house&gt;
    &lt;aid_for_construction_or_repair_of_the_house_comment openmrs_concept=&quot;1521^AID FOR CONSTRUCTION OR REPAIR OF THE HOUSE COMMENT^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/aid_for_construction_or_repair_of_the_house_comment&gt;
    &lt;school_aid_for_children openmrs_concept=&quot;1394^SCHOOL AID FOR CHILDREN^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/school_aid_for_children&gt;
    &lt;school_aid_for_children_comment openmrs_concept=&quot;1518^SCHOOL AID FOR CHILDREN COMMENT^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/school_aid_for_children_comment&gt;
    &lt;formation_for_work openmrs_concept=&quot;1397^JOB TRAINING^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/formation_for_work&gt;
    &lt;job_training_comment openmrs_concept=&quot;1522^JOB TRAINING COMMENT^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/job_training_comment&gt;
    &lt;assistance_with_funerals openmrs_concept=&quot;1492^ASSISTANCE WITH FUNERALS^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/assistance_with_funerals&gt;
    &lt;assistance_with_funerals_comment openmrs_concept=&quot;1519^ASSISTANCE WITH FUNERALS COMMENT^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/assistance_with_funerals_comment&gt;
    &lt;tuberculosis_treatment_group openmrs_concept=&quot;1378^TUBERCULOSIS TREATMENT GROUP^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/tuberculosis_treatment_group&gt;
    &lt;antiretroviral_treatment_group openmrs_concept=&quot;1377^ANTIRETROVIRAL TREATMENT GROUP^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/antiretroviral_treatment_group&gt;
    &lt;patient_hospitalised_during_diagnosis openmrs_concept=&quot;1473^PATIENT HOSPITALISED DURING DIAGNOSIS^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/patient_hospitalised_during_diagnosis&gt;
    &lt;treatment_plan_other_remarks openmrs_concept=&quot;1391^TREATMENT PLAN OTHER REMARKS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/treatment_plan_other_remarks&gt;
    &lt;return_visit_date openmrs_concept=&quot;5096^RETURN VISIT DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/return_visit_date&gt;
    &lt;functional_review_of_symptoms_construct_13 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_13&gt;
    &lt;functional_review_of_symptoms_construct_14 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_14&gt;
    &lt;functional_review_of_symptoms_construct_15 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_15&gt;
    &lt;functional_review_of_symptoms_construct_16 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_16&gt;
    &lt;functional_review_of_symptoms_construct_17 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_17&gt;
    &lt;functional_review_of_symptoms_construct_18 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_18&gt;
    &lt;functional_review_of_symptoms_construct_19 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_19&gt;
    &lt;functional_review_of_symptoms_construct_20 openmrs_concept=&quot;1292^FUNCTIONAL REVIEW OF SYMPTOMS CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;functional_review_of_symptoms multiple=&quot;0&quot; openmrs_concept=&quot;1293^SYMPTOM PRESENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/functional_review_of_symptoms&gt;
      &lt;duration_of_symptom openmrs_concept=&quot;1294^DURATION OF SYMPTOM IN DAYS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/duration_of_symptom&gt;
    &lt;/functional_review_of_symptoms_construct_20&gt;
    &lt;previous_treatment_construct openmrs_concept=&quot;1608^PREVIOUS TREATMENT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_regimen multiple=&quot;0&quot; openmrs_concept=&quot;1611^PREVIOUS TREATMENT REGIMEN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_regimen&gt;
      &lt;previous_treatment_drug multiple=&quot;0&quot; openmrs_concept=&quot;1609^PREVIOUS TREATMENT DRUG^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_drug&gt;
      &lt;previous_treatment_non-coded openmrs_concept=&quot;1615^PREVIOUS TREATMENT, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_non-coded&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_construct&gt;
    &lt;previous_treatment_construct_1 openmrs_concept=&quot;1608^PREVIOUS TREATMENT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_regimen multiple=&quot;0&quot; openmrs_concept=&quot;1611^PREVIOUS TREATMENT REGIMEN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_regimen&gt;
      &lt;previous_treatment_drug multiple=&quot;0&quot; openmrs_concept=&quot;1609^PREVIOUS TREATMENT DRUG^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_drug&gt;
      &lt;previous_treatment_non-coded openmrs_concept=&quot;1615^PREVIOUS TREATMENT, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_non-coded&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_construct_1&gt;
    &lt;previous_treatment_construct_2 openmrs_concept=&quot;1608^PREVIOUS TREATMENT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_regimen multiple=&quot;0&quot; openmrs_concept=&quot;1611^PREVIOUS TREATMENT REGIMEN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_regimen&gt;
      &lt;previous_treatment_drug multiple=&quot;0&quot; openmrs_concept=&quot;1609^PREVIOUS TREATMENT DRUG^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_drug&gt;
      &lt;previous_treatment_non-coded openmrs_concept=&quot;1615^PREVIOUS TREATMENT, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_non-coded&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_construct_2&gt;
    &lt;previous_treatment_construct_3 openmrs_concept=&quot;1608^PREVIOUS TREATMENT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_regimen multiple=&quot;0&quot; openmrs_concept=&quot;1611^PREVIOUS TREATMENT REGIMEN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_regimen&gt;
      &lt;previous_treatment_drug multiple=&quot;0&quot; openmrs_concept=&quot;1609^PREVIOUS TREATMENT DRUG^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_drug&gt;
      &lt;previous_treatment_non-coded openmrs_concept=&quot;1615^PREVIOUS TREATMENT, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_non-coded&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_construct_3&gt;
    &lt;previous_treatment_construct_4 openmrs_concept=&quot;1608^PREVIOUS TREATMENT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_regimen multiple=&quot;0&quot; openmrs_concept=&quot;1611^PREVIOUS TREATMENT REGIMEN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_regimen&gt;
      &lt;previous_treatment_drug multiple=&quot;0&quot; openmrs_concept=&quot;1609^PREVIOUS TREATMENT DRUG^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_drug&gt;
      &lt;previous_treatment_non-coded openmrs_concept=&quot;1615^PREVIOUS TREATMENT, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_non-coded&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_construct_4&gt;
    &lt;previous_treatment_construct_5 openmrs_concept=&quot;1608^PREVIOUS TREATMENT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_regimen multiple=&quot;0&quot; openmrs_concept=&quot;1611^PREVIOUS TREATMENT REGIMEN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_regimen&gt;
      &lt;previous_treatment_drug multiple=&quot;0&quot; openmrs_concept=&quot;1609^PREVIOUS TREATMENT DRUG^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_drug&gt;
      &lt;previous_treatment_non-coded openmrs_concept=&quot;1615^PREVIOUS TREATMENT, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_non-coded&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_construct_5&gt;
    &lt;previous_treatment_construct_6 openmrs_concept=&quot;1608^PREVIOUS TREATMENT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_regimen multiple=&quot;0&quot; openmrs_concept=&quot;1611^PREVIOUS TREATMENT REGIMEN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_regimen&gt;
      &lt;previous_treatment_drug multiple=&quot;0&quot; openmrs_concept=&quot;1609^PREVIOUS TREATMENT DRUG^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_drug&gt;
      &lt;previous_treatment_non-coded openmrs_concept=&quot;1615^PREVIOUS TREATMENT, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_non-coded&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_construct_6&gt;
    &lt;previous_treatment_construct_7 openmrs_concept=&quot;1608^PREVIOUS TREATMENT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_regimen multiple=&quot;0&quot; openmrs_concept=&quot;1611^PREVIOUS TREATMENT REGIMEN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_regimen&gt;
      &lt;previous_treatment_drug multiple=&quot;0&quot; openmrs_concept=&quot;1609^PREVIOUS TREATMENT DRUG^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_drug&gt;
      &lt;previous_treatment_non-coded openmrs_concept=&quot;1615^PREVIOUS TREATMENT, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_non-coded&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_construct_7&gt;
    &lt;previous_treatment_construct_8 openmrs_concept=&quot;1608^PREVIOUS TREATMENT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_regimen multiple=&quot;0&quot; openmrs_concept=&quot;1611^PREVIOUS TREATMENT REGIMEN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_regimen&gt;
      &lt;previous_treatment_drug multiple=&quot;0&quot; openmrs_concept=&quot;1609^PREVIOUS TREATMENT DRUG^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_drug&gt;
      &lt;previous_treatment_non-coded openmrs_concept=&quot;1615^PREVIOUS TREATMENT, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_non-coded&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_construct_8&gt;
    &lt;previous_treatment_construct_9 openmrs_concept=&quot;1608^PREVIOUS TREATMENT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_regimen multiple=&quot;0&quot; openmrs_concept=&quot;1611^PREVIOUS TREATMENT REGIMEN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_regimen&gt;
      &lt;previous_treatment_drug multiple=&quot;0&quot; openmrs_concept=&quot;1609^PREVIOUS TREATMENT DRUG^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_drug&gt;
      &lt;previous_treatment_non-coded openmrs_concept=&quot;1615^PREVIOUS TREATMENT, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_non-coded&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_construct_9&gt;
    &lt;previous_treatment_construct_10 openmrs_concept=&quot;1608^PREVIOUS TREATMENT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_regimen multiple=&quot;0&quot; openmrs_concept=&quot;1611^PREVIOUS TREATMENT REGIMEN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_regimen&gt;
      &lt;previous_treatment_drug multiple=&quot;0&quot; openmrs_concept=&quot;1609^PREVIOUS TREATMENT DRUG^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_drug&gt;
      &lt;previous_treatment_non-coded openmrs_concept=&quot;1615^PREVIOUS TREATMENT, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_non-coded&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_construct_10&gt;
    &lt;previous_treatment_construct_11 openmrs_concept=&quot;1608^PREVIOUS TREATMENT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_regimen multiple=&quot;0&quot; openmrs_concept=&quot;1611^PREVIOUS TREATMENT REGIMEN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_regimen&gt;
      &lt;previous_treatment_drug multiple=&quot;0&quot; openmrs_concept=&quot;1609^PREVIOUS TREATMENT DRUG^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_drug&gt;
      &lt;previous_treatment_non-coded openmrs_concept=&quot;1615^PREVIOUS TREATMENT, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_non-coded&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_construct_11&gt;
    &lt;previous_treatment_construct_12 openmrs_concept=&quot;1608^PREVIOUS TREATMENT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_regimen multiple=&quot;0&quot; openmrs_concept=&quot;1611^PREVIOUS TREATMENT REGIMEN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_regimen&gt;
      &lt;previous_treatment_drug multiple=&quot;0&quot; openmrs_concept=&quot;1609^PREVIOUS TREATMENT DRUG^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_drug&gt;
      &lt;previous_treatment_non-coded openmrs_concept=&quot;1615^PREVIOUS TREATMENT, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_non-coded&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_construct_12&gt;
    &lt;previous_treatment_construct_13 openmrs_concept=&quot;1608^PREVIOUS TREATMENT CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;previous_treatment_regimen multiple=&quot;0&quot; openmrs_concept=&quot;1611^PREVIOUS TREATMENT REGIMEN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_regimen&gt;
      &lt;previous_treatment_drug multiple=&quot;0&quot; openmrs_concept=&quot;1609^PREVIOUS TREATMENT DRUG^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_drug&gt;
      &lt;previous_treatment_non-coded openmrs_concept=&quot;1615^PREVIOUS TREATMENT, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/previous_treatment_non-coded&gt;
      &lt;drug_start_date openmrs_concept=&quot;1499^DRUG START DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_start_date&gt;
      &lt;drug_end_date openmrs_concept=&quot;1500^DRUG END DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/drug_end_date&gt;
    &lt;/previous_treatment_construct_13&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_1 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_1&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_2 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_2&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_3 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_3&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_4 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_4&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_5 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_5&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_6 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_6&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_7 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_7&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_8 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_8&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_9 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_9&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_10 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_10&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_11 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_11&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_12 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_12&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_13 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_13&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_14 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_14&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_15 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_15&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_16 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_16&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_17 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_17&gt;
    &lt;previous_diagnosis_non-coded openmrs_concept=&quot;1617^PREVIOUS DIAGNOSIS, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/previous_diagnosis_non-coded&gt;
    &lt;family_planning_action_to_take openmrs_concept=&quot;1618^FAMILY PLANNING, ACTION TO TAKE^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/family_planning_action_to_take&gt;
    &lt;antiretroviral_treatment_needed multiple=&quot;0&quot; openmrs_concept=&quot;1445^ANTIRETROVIRAL TREATMENT NEEDED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/antiretroviral_treatment_needed&gt;
    &lt;comments_at_conclusion_of_examination openmrs_concept=&quot;1620^COMMENTS AT CONCLUSION OF EXAMINATION^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/comments_at_conclusion_of_examination&gt;
  &lt;/obs&gt;
  &lt;problem_list openmrs_concept=&quot;1284^PROBLEM LIST^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
    &lt;problem_added multiple=&quot;0&quot; openmrs_concept=&quot;6042^PROBLEM ADDED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/problem_added&gt;
    &lt;problem_resolved multiple=&quot;0&quot; openmrs_concept=&quot;6097^PROBLEM RESOLVED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/problem_resolved&gt;
  &lt;/problem_list&gt;
  &lt;orders&gt;
    &lt;medication_history openmrs_concept=&quot;1281^MEDICATION HISTORY^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;current_antiretroviral_drugs_used_for_transmission_prophylaxis multiple=&quot;0&quot; openmrs_concept=&quot;966^CURRENT ANTIRETROVIRAL DRUGS USED FOR TRANSMISSION PROPHYLAXIS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/current_antiretroviral_drugs_used_for_transmission_prophylaxis&gt;
      &lt;current_antiretroviral_drugs_used_for_treatment multiple=&quot;0&quot; openmrs_concept=&quot;1088^CURRENT ANTIRETROVIRAL DRUGS USED FOR TREATMENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/current_antiretroviral_drugs_used_for_treatment&gt;
    &lt;/medication_history&gt;
    &lt;medication_orders openmrs_concept=&quot;1282^MEDICATION ORDERS^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;antiretroviral_plan multiple=&quot;0&quot; openmrs_concept=&quot;1255^ANTIRETROVIRAL PLAN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/antiretroviral_plan&gt;
    &lt;/medication_orders&gt;
  &lt;/orders&gt;
  &lt;other/&gt;&lt;/form&gt;" xslt="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;!--
OpenMRS FormEntry Form HL7 Translation

This XSLT is used to translate OpenMRS forms from XML into HL7 2.5 format

@author Burke Mamlin, MD
@author Ben Wolfe
@version 1.9.5

1.9.5 - allow for organizing sections under &quot;obs&quot; section
1.9.4 - add support for message uid (as HL7 control id) and transform of patient.health_center to Discharge to Location (PV1-37)
1.9.3 - fixed rounding error on timestamp (tenths of seconds getting rounded up, causing &quot;60&quot; seconds in some cases) 
1.9.2 - first generally useful version
--&gt;

&lt;xsl:stylesheet version=&quot;2.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:fn=&quot;http://www.w3.org/2005/xpath-functions&quot; xmlns:xdt=&quot;http://www.w3.org/2005/xpath-datatypes&quot;&gt;
	&lt;xsl:output method=&quot;text&quot; version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; indent=&quot;no&quot;/&gt;

&lt;xsl:variable name=&quot;SENDING-APPLICATION&quot;&gt;FORMENTRY&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;SENDING-FACILITY&quot;&gt;AMRS.ELD&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;RECEIVING-APPLICATION&quot;&gt;HL7LISTENER&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;RECEIVING-FACILITY&quot;&gt;AMRS.ELD&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;PATIENT-AUTHORITY&quot;&gt;&lt;/xsl:variable&gt; &lt;!-- leave blank for internal id, max 20 characters --&gt;
                                                       &lt;!-- for now, must match patient_identifier_type.name --&gt;
&lt;xsl:variable name=&quot;FORM-AUTHORITY&quot;&gt;AMRS.ELD.FORMID&lt;/xsl:variable&gt; &lt;!-- max 20 characters --&gt;

&lt;xsl:template match=&quot;/&quot;&gt;
	&lt;xsl:apply-templates /&gt;
&lt;/xsl:template&gt;

&lt;!-- Form template --&gt;
&lt;xsl:template match=&quot;form&quot;&gt;
	&lt;!-- MSH Header --&gt;
	&lt;xsl:text&gt;MSH|^~\&amp;amp;&lt;/xsl:text&gt;   &lt;!-- Message header, field separator, and encoding characters --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-3 Sending application --&gt;
	&lt;xsl:value-of select=&quot;$SENDING-APPLICATION&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-4 Sending facility --&gt;
	&lt;xsl:value-of select=&quot;$SENDING-FACILITY&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-5 Receiving application --&gt;
	&lt;xsl:value-of select=&quot;$RECEIVING-APPLICATION&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-6 Receiving facility --&gt;
	&lt;xsl:value-of select=&quot;$RECEIVING-FACILITY&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-7 Date/time message sent --&gt;
	&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;current-dateTime()&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-8 Security --&gt;
	&lt;xsl:text&gt;|ORU^R01&lt;/xsl:text&gt;       &lt;!-- MSH-9 Message type ^ Event type (observation report unsolicited) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-10 Message control ID --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;header/uid&quot;&gt;
			&lt;xsl:value-of select=&quot;header/uid&quot; /&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;patient/patient.patient_id&quot; /&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;current-dateTime()&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|P&lt;/xsl:text&gt;             &lt;!-- MSH-11 Processing ID --&gt;
	&lt;xsl:text&gt;|2.5&lt;/xsl:text&gt;           &lt;!-- MSH-12 HL7 version --&gt;
	&lt;xsl:text&gt;|1&lt;/xsl:text&gt;             &lt;!-- MSH-13 Message sequence number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-14 Continuation Pointer --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-15 Accept Acknowledgement Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-16 Application Acknowledgement Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-17 Country Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-18 Character Set --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-19 Principal Language of Message --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-20 Alternate Character Set Handling Scheme --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-21 Message Profile Identifier --&gt;
	&lt;xsl:value-of select=&quot;@id&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;
	&lt;xsl:value-of select=&quot;$FORM-AUTHORITY&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;

	&lt;!-- PID header --&gt;
	&lt;xsl:text&gt;PID&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-1 Set ID --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-2 (deprecated) Patient ID --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-3 Patient Identifier List --&gt;
	&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
		&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.patient_id&quot; /&gt;
		&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
		&lt;xsl:with-param name=&quot;type&quot; select=&quot;L&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:if test=&quot;patient/patient.previous_mrn and string-length(patient/patient.previous_mrn) &gt; 0&quot;&gt;
		&lt;xsl:text&gt;~&lt;/xsl:text&gt;
		&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
			&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.previous_mrn&quot; /&gt;
			&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
			&lt;xsl:with-param name=&quot;type&quot; select=&quot;PRIOR&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:if&gt;
	&lt;!-- Additional patient identifiers --&gt;
	&lt;!-- This example is for an MTCT-PLUS identifier used in the AMPATH project in Kenya (skipped if not present) --&gt;
	&lt;xsl:if test=&quot;patient/patient.mtctplus_id and string-length(patient/patient.mtctplus_id) &gt; 0&quot;&gt;
		&lt;xsl:text&gt;~&lt;/xsl:text&gt;
		&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
			&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.mtctplus_id&quot; /&gt;
			&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
			&lt;xsl:with-param name=&quot;type&quot; select=&quot;MTCTPLUS&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:if&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-4 (deprecated) Alternate patient ID --&gt;
	&lt;!-- PID-5 Patient name --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- Family name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.family_name&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Given name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.given_name&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Middle name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.middle_name&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-6 Mother&apos;s maiden name --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-7 Date/Time of Birth --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.date_of_birth&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
	
	&lt;!-- PV1 header --&gt;
	&lt;xsl:text&gt;PV1&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-1 Sub ID --&gt;
	&lt;xsl:text&gt;|O&lt;/xsl:text&gt;             &lt;!-- PV1-2 Patient class (O = outpatient) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-3 Patient location --&gt;
	&lt;xsl:value-of select=&quot;encounter/encounter.location_id&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-4 Admission type (2 = return) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-5 Pre-Admin Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-6 Prior Patient Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-7 Attending Doctor --&gt;
	&lt;xsl:value-of select=&quot;encounter/encounter.provider_id&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-8 Referring Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-9 Consulting Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-10 Hospital Service --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-11 Temporary Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-12 Preadmin Test Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-13 Re-adminssion Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-14 Admit Source --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-15 Ambulatory Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-16 VIP Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-17 Admitting Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-18 Patient Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-19 Visit Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-20 Financial Class --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-21 Charge Price Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-22 Courtesy Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-23 Credit Rating --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-24 Contract Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-25 Contract Effective Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-26 Contract Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-27 Contract Period --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-28 Interest Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-29 Transfer to Bad Debt Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-30 Transfer to Bad Debt Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-31 Bad Debt Agency Code --&gt;
  &lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-31 Bad Debt Transfer Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-33 Bad Debt Recovery Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-34 Delete Account Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-35 Delete Account Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-36 Discharge Disposition --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-37 Discharge To Location --&gt;
	&lt;xsl:if test=&quot;patient/patient.health_center&quot;&gt;
		&lt;xsl:value-of select=&quot;replace(patient/patient.health_center,&apos;\^&apos;,&apos;&amp;amp;&apos;)&quot; /&gt;
	&lt;/xsl:if&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-38 Diet Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-39 Servicing Facility --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-40 Bed Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-41 Account Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-42 Pending Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-43 Prior Temporary Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-44 Admit Date/Time --&gt;
	&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;encounter/encounter.encounter_datetime&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-45 Discharge Date/Time --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-46 Current Patient Balance --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-47 Total Charges --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-48 Total Adjustments --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-49 Total Payments --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-50 Alternate Visit ID --&gt;
	&lt;xsl:text&gt;|V&lt;/xsl:text&gt;             &lt;!-- PV1-51 Visit Indicator --&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- We use encounter date as the timestamp for each observation --&gt;
	&lt;xsl:variable name=&quot;encounterTimestamp&quot;&gt;
		&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
			&lt;xsl:with-param name=&quot;date&quot; select=&quot;encounter/encounter.encounter_datetime&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:variable&gt;
	
	&lt;!-- ORC Common Order Segment --&gt;
	&lt;xsl:text&gt;ORC&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|RE&lt;/xsl:text&gt;            &lt;!-- ORC-1 Order Control (RE = obs to follow) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-2 Placer Order Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-3 Filler Order Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-4 Placer Group Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-5 Order Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-6 Response Flag --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-7 Quantity/Timing --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-8 Parent --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-9 Date/Time of Transaction --&gt;
	&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;xs:dateTime(header/date_entered)&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-10 Entered By --&gt;
	&lt;xsl:value-of select=&quot;header/enterer&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- Observation(s) --&gt;
	&lt;!-- &lt;xsl:variable name=&quot;obsList&quot; select=&quot;obs/*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]&quot; /&gt; --&gt;
	&lt;xsl:variable name=&quot;obsList&quot; select=&quot;obs/*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]|obs/*[not(@openmrs_concept)]/*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]&quot; /&gt;
	&lt;xsl:variable name=&quot;obsListCount&quot; select=&quot;count($obsList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;!-- Observation OBR --&gt;
	&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
	&lt;xsl:text&gt;1&lt;/xsl:text&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
	&lt;xsl:value-of select=&quot;obs/@openmrs_concept&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- observation OBXs --&gt;
	&lt;xsl:for-each select=&quot;$obsList&quot;&gt;
		&lt;xsl:choose&gt;
			&lt;xsl:when test=&quot;value&quot;&gt;
				&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
					&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
					&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
					&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
					&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
					&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
					&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
					&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
				&lt;/xsl:call-template&gt;
			&lt;/xsl:when&gt;
			&lt;xsl:otherwise&gt;
				&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
				&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
						&lt;xsl:with-param name=&quot;subId&quot; select=&quot;concat($setId,position())&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:for-each&gt;
			&lt;/xsl:otherwise&gt;
		&lt;/xsl:choose&gt;
	&lt;/xsl:for-each&gt;
	
	&lt;!-- Grouped observation(s) --&gt;
	&lt;!-- &lt;xsl:variable name=&quot;obsGroupList&quot; select=&quot;obs/*[@openmrs_concept and not(date) and *[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]]&quot; /&gt; --&gt;
	&lt;xsl:variable name=&quot;obsGroupList&quot; select=&quot;obs/*[@openmrs_concept and not(date) and *[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]]|obs/*[not(@openmrs_concept)]/*[@openmrs_concept and not(date) and *[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]]&quot; /&gt;
	&lt;xsl:variable name=&quot;obsGroupListCount&quot; select=&quot;count($obsGroupList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:for-each select=&quot;$obsGroupList&quot;&gt;
		&lt;!-- Observation OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + position()&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
		
		&lt;!-- Generate OBXs --&gt;
		&lt;xsl:for-each select=&quot;*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;value&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
						&lt;xsl:with-param name=&quot;subId&quot; select=&quot;1&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;
					&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
						&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
							&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
							&lt;xsl:with-param name=&quot;subId&quot; select=&quot;concat(&apos;1.&apos;,position())&quot; /&gt;
							&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
							&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
							&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
						&lt;/xsl:call-template&gt;
					&lt;/xsl:for-each&gt;
				&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:for-each&gt;
	&lt;/xsl:for-each&gt;

	&lt;!-- Problem list(s) --&gt;
	&lt;xsl:variable name=&quot;problemList&quot; select=&quot;problem_list/*[value[text() != &apos;&apos;]]&quot; /&gt;
	&lt;xsl:variable name=&quot;problemListCount&quot; select=&quot;count($problemList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:if test=&quot;$problemList&quot;&gt;
		&lt;!-- Problem list OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + $obsGroupListCount + 1&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;problem_list/@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

		&lt;!-- Problem list OBXs --&gt;
		&lt;xsl:for-each select=&quot;$problemList&quot;&gt;
			&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
				&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
				&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;&apos;CWE&apos;&quot; /&gt;
				&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
				&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
				&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
				&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
			&lt;/xsl:call-template&gt;		
		&lt;/xsl:for-each&gt;
	&lt;/xsl:if&gt;
	
	&lt;!-- Orders --&gt;
	&lt;xsl:variable name=&quot;orderList&quot; select=&quot;orders/*[*[@openmrs_concept and ((value and value/text() != &apos;&apos;) or *[@openmrs_concept and text() = &apos;true&apos;])]]&quot; /&gt;
	&lt;xsl:variable name=&quot;orderListCount&quot; select=&quot;count($orderList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:for-each select=&quot;$orderList&quot;&gt;
		&lt;!-- Order section OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + $obsGroupListCount + $problemListCount + 1&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
	
		&lt;!-- Order OBXs --&gt;
		&lt;xsl:for-each select=&quot;*[@openmrs_concept and ((value and value/text() != &apos;&apos;) or *[@openmrs_concept and text() = &apos;true&apos;])]&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;value&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;
					&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
						&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
							&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
							&lt;xsl:with-param name=&quot;subId&quot; select=&quot;position()&quot; /&gt;
							&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
							&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
							&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
						&lt;/xsl:call-template&gt;
					&lt;/xsl:for-each&gt;
				&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:for-each&gt;	
	&lt;/xsl:for-each&gt;
	
&lt;/xsl:template&gt;

&lt;!-- Patient Identifier (CX) generator --&gt;
&lt;xsl:template name=&quot;patient_id&quot;&gt;
	&lt;xsl:param name=&quot;pid&quot; /&gt;
	&lt;xsl:param name=&quot;auth&quot; /&gt;
	&lt;xsl:param name=&quot;type&quot; /&gt;
	&lt;xsl:value-of select=&quot;$pid&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Check digit --&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Check Digit Scheme --&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Assigning Authority --&gt;
	&lt;xsl:value-of select=&quot;$auth&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Identifier Type --&gt;
	&lt;xsl:value-of select=&quot;$type&quot; /&gt;
&lt;/xsl:template&gt;

&lt;!-- OBX Generator --&gt;
&lt;xsl:template name=&quot;obsObx&quot;&gt;
	&lt;xsl:param name=&quot;setId&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;subId&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;datatype&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:param name=&quot;concept&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:param name=&quot;date&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;time&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;value&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;units&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;encounterTimestamp&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:text&gt;OBX&lt;/xsl:text&gt;                     &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Set ID --&gt;
	&lt;xsl:value-of select=&quot;$setId&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Observation datatype --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;BIT&apos;&quot;&gt;
			&lt;xsl:text&gt;NM&lt;/xsl:text&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$datatype&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Concept (what was observed --&gt;
	&lt;xsl:value-of select=&quot;$concept&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Sub-ID --&gt;
	&lt;xsl:value-of select=&quot;$subId&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Value --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;TS&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;DT&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;TM&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Time&quot;&gt;
				&lt;xsl:with-param name=&quot;time&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;BIT&apos;&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;$value = &apos;0&apos; or upper-case($value) = &apos;FALSE&apos;&quot;&gt;0&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;1&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$value&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Units --&gt;
	&lt;xsl:value-of select=&quot;$units&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Reference range --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Abnormal flags --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Probability --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Nature of abnormal test --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Observation result status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Effective date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- User defined access checks --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Date time of observation --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$date and $time&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;dateTime($date,$time)&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$date&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$date&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$encounterTimestamp&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted timestamp --&gt;
&lt;xsl:template name=&quot;hl7Timestamp&quot;&gt;
	&lt;xsl:param name=&quot;date&quot; /&gt;
	&lt;xsl:if test=&quot;string($date) != &apos;&apos;&quot;&gt;
		&lt;xsl:value-of select=&quot;concat(year-from-dateTime($date),format-number(month-from-dateTime($date),&apos;00&apos;),format-number(day-from-dateTime($date),&apos;00&apos;),format-number(hours-from-dateTime($date),&apos;00&apos;),format-number(minutes-from-dateTime($date),&apos;00&apos;),format-number(floor(seconds-from-dateTime($date)),&apos;00&apos;))&quot; /&gt;
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted date --&gt;
&lt;xsl:template name=&quot;hl7Date&quot;&gt;
	&lt;xsl:param name=&quot;date&quot; /&gt;
	&lt;xsl:if test=&quot;string($date) != &apos;&apos;&quot;&gt;
		&lt;xsl:choose&gt;
			&lt;xsl:when test=&quot;contains(string($date),&apos;T&apos;)&quot;&gt;
				&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
					&lt;xsl:with-param name=&quot;date&quot; select=&quot;xs:date(substring-before($date,&apos;T&apos;))&quot; /&gt;
				&lt;/xsl:call-template&gt;
			&lt;/xsl:when&gt;
			&lt;xsl:otherwise&gt;
					&lt;xsl:value-of select=&quot;concat(year-from-date($date),format-number(month-from-date($date),&apos;00&apos;),format-number(day-from-date($date),&apos;00&apos;))&quot; /&gt;
			&lt;/xsl:otherwise&gt;
		&lt;/xsl:choose&gt;				
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted time --&gt;
&lt;xsl:template name=&quot;hl7Time&quot;&gt;
	&lt;xsl:param name=&quot;time&quot; /&gt;
	&lt;xsl:if test=&quot;$time != &apos;&apos;&quot;&gt;
		&lt;xsl:value-of select=&quot;concat(format-number(hours-from-time($time),&apos;00&apos;),format-number(minutes-from-time($time),&apos;00&apos;),format-number(floor(seconds-from-time($time)),&apos;00&apos;))&quot; /&gt;
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;" creator="1" date_created="2006-06-21 17:13:52.0" changed_by="15971" date_changed="2007-11-15 21:00:25.0" retired="false" retired_reason="" guid="4e7c2c90-26fe-102b-80cb-0017a47871b2"/>
  <form form_id="27" name="OLD - RENDEZ-VOUS (RWANDA)" version="0.1" build="28" published="0" description="Return visit form (April 6, 2006 version)" encounter_type="2" template="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;?mso-infoPathSolution name=&quot;OLD - RENDEZ-VOUS (RWANDA)&quot; href=&quot;http://rwanda.pih-emr.org/openmrs/moduleServlet/formentry/forms/27.xsn&quot; solutionVersion=&quot;0.1.0.28&quot; productVersion=&quot;11.0.6357&quot; PIVersion=&quot;1.0.0.0&quot; ?&gt;&lt;?mso-application progid=&quot;InfoPath.Document&quot;?&gt;&lt;form xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xd=&quot;http://schemas.microsoft.com/office/infopath/2003&quot; xmlns:openmrs=&quot;http://rwanda.pih-emr.org/openmrs/moduleServlet/formentry/forms/schema/27-28&quot; id=&quot;27&quot; name=&quot;OLD - RENDEZ-VOUS (RWANDA)&quot; version=&quot;0.1&quot;&gt;
  &lt;header&gt;
    &lt;enterer&gt;$!{enterer}&lt;/enterer&gt;
    &lt;date_entered&gt;$!{dateEntered}&lt;/date_entered&gt;
    &lt;session&gt;$!{sessionId}&lt;/session&gt;
    &lt;uid&gt;$!{uid}&lt;/uid&gt;
  &lt;/header&gt;
  &lt;patient&gt;
    &lt;patient.birthdate openmrs_attribute=&quot;birthdate&quot; openmrs_table=&quot;patient&quot;&gt;$!{date.format($patient.getBirthdate())}&lt;/patient.birthdate&gt;
    &lt;patient.birthdate_estimated openmrs_attribute=&quot;birthdate_estimated&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getBirthDateEstimated()}&lt;/patient.birthdate_estimated&gt;
    &lt;patient.family_name openmrs_attribute=&quot;family_name&quot; openmrs_table=&quot;patient_name&quot;&gt;$!{patient.getFamilyName()}&lt;/patient.family_name&gt;
    &lt;patient.given_name openmrs_attribute=&quot;given_name&quot; openmrs_table=&quot;patient_name&quot;&gt;$!{patient.getGivenName()}&lt;/patient.given_name&gt;
    &lt;patient.medical_record_number openmrs_attribute=&quot;identifier&quot; openmrs_table=&quot;patient_identifier&quot;&gt;$!{patient.getPatientIdentifier(1).getIdentifier()}&lt;/patient.medical_record_number&gt;
    &lt;patient.middle_name openmrs_attribute=&quot;middle_name&quot; openmrs_table=&quot;patient_name&quot;&gt;$!{patient.getMiddleName()}&lt;/patient.middle_name&gt;
    &lt;patient.patient_id openmrs_attribute=&quot;patient_id&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getPatientId()}&lt;/patient.patient_id&gt;
    &lt;patient.sex openmrs_attribute=&quot;gender&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getGender()}&lt;/patient.sex&gt;
    &lt;patient.tribe openmrs_attribute=&quot;tribe&quot; openmrs_table=&quot;patient&quot;&gt;$!{patient.getTribe().getTribeId()}^$!{patient.getTribe().getName()}&lt;/patient.tribe&gt;
    &lt;patient_address.address1 openmrs_attribute=&quot;address1&quot; openmrs_table=&quot;patient_address&quot;&gt;$!{patient.getPersonAddress().getAddress1()}&lt;/patient_address.address1&gt;
    &lt;patient_address.address2 openmrs_attribute=&quot;address2&quot; openmrs_table=&quot;patient_address&quot;&gt;$!{patient.getPersonAddress().getAddress2()}&lt;/patient_address.address2&gt;
  &lt;/patient&gt;
  &lt;encounter&gt;
    &lt;encounter.encounter_datetime openmrs_attribute=&quot;encounter_datetime&quot; openmrs_table=&quot;encounter&quot;/&gt;
    &lt;encounter.location_id openmrs_attribute=&quot;location_id&quot; openmrs_table=&quot;encounter&quot;/&gt;
    &lt;encounter.provider_id openmrs_attribute=&quot;provider_id&quot; openmrs_table=&quot;encounter&quot;/&gt;
  &lt;/encounter&gt;
  &lt;obs openmrs_concept=&quot;1238^MEDICAL RECORD OBSERVATIONS^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
    &lt;presenting_history openmrs_concept=&quot;974^PRESENTING HISTORY^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/presenting_history&gt;
    &lt;patient_hospitalized_since_last_visit openmrs_concept=&quot;1715^PATIENT HOSPITALIZED SINCE LAST VISIT^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/patient_hospitalized_since_last_visit&gt;
    &lt;diagnosis_while_hospitalized_non-coded openmrs_concept=&quot;1716^DIAGNOSIS WHILE HOSPITALIZED, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/diagnosis_while_hospitalized_non-coded&gt;
    &lt;patient_using_family_planning openmrs_concept=&quot;1717^PATIENT USING FAMILY PLANNING^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/patient_using_family_planning&gt;
    &lt;method_of_family_planning multiple=&quot;1&quot; openmrs_concept=&quot;374^METHOD OF FAMILY PLANNING^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;not_applicable openmrs_concept=&quot;1175^NOT APPLICABLE^99DCT&quot;&gt;false&lt;/not_applicable&gt;
        &lt;female_sterilization openmrs_concept=&quot;5276^FEMALE STERILIZATION^99DCT&quot;&gt;false&lt;/female_sterilization&gt;
        &lt;sterilization openmrs_concept=&quot;2712^STERILIZATION^99DCT&quot;&gt;false&lt;/sterilization&gt;
        &lt;diaphragm openmrs_concept=&quot;5278^DIAPHRAGM^99DCT&quot;&gt;false&lt;/diaphragm&gt;
        &lt;medroxyprogesterone_acetate openmrs_concept=&quot;907^MEDROXYPROGESTERONE ACETATE^99DCT&quot;&gt;false&lt;/medroxyprogesterone_acetate&gt;
        &lt;other_non-coded openmrs_concept=&quot;5622^OTHER NON-CODED^99DCT&quot;&gt;false&lt;/other_non-coded&gt;
        &lt;natural_family_planning openmrs_concept=&quot;5277^NATURAL FAMILY PLANNING^99DCT&quot;&gt;false&lt;/natural_family_planning&gt;
        &lt;intrauterine_device openmrs_concept=&quot;5275^INTRAUTERINE DEVICE^99DCT&quot;&gt;false&lt;/intrauterine_device&gt;
        &lt;tubal_ligation openmrs_concept=&quot;1719^TUBAL LIGATION^99DCT&quot;&gt;false&lt;/tubal_ligation&gt;
        &lt;oral_contraception openmrs_concept=&quot;780^ORAL CONTRACEPTION^99DCT&quot;&gt;false&lt;/oral_contraception&gt;
        &lt;norplant openmrs_concept=&quot;1718^NORPLANT^99DCT&quot;&gt;false&lt;/norplant&gt;
        &lt;none openmrs_concept=&quot;1107^NONE^99DCT&quot;&gt;false&lt;/none&gt;
        &lt;injectable_contraceptives openmrs_concept=&quot;5279^INJECTABLE CONTRACEPTIVES^99DCT&quot;&gt;false&lt;/injectable_contraceptives&gt;
        &lt;condoms openmrs_concept=&quot;190^CONDOMS^99DCT&quot;&gt;false&lt;/condoms&gt;
        &lt;vasectomy openmrs_concept=&quot;1721^VASECTOMY^99DCT&quot;&gt;false&lt;/vasectomy&gt;
        &lt;abstinence openmrs_concept=&quot;1720^ABSTINENCE^99DCT&quot;&gt;false&lt;/abstinence&gt;
    &lt;/method_of_family_planning&gt;
    &lt;pregnancy_status multiple=&quot;0&quot; openmrs_concept=&quot;5272^PREGNANCY STATUS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/pregnancy_status&gt;
    &lt;estimated_date_of_confinement openmrs_concept=&quot;5596^ESTIMATED DATE OF CONFINEMENT^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/estimated_date_of_confinement&gt;
    &lt;date_of_last_menstrual_period openmrs_concept=&quot;968^DATE OF LAST MENSTRUAL PERIOD^99DCT&quot; openmrs_datatype=&quot;TS&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/date_of_last_menstrual_period&gt;
    &lt;systolic_blood_pressure openmrs_concept=&quot;5085^SYSTOLIC BLOOD PRESSURE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/systolic_blood_pressure&gt;
    &lt;diastolic_blood_pressure openmrs_concept=&quot;5086^DIASTOLIC BLOOD PRESSURE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/diastolic_blood_pressure&gt;
    &lt;pulse openmrs_concept=&quot;5087^PULSE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/pulse&gt;
    &lt;temperature_c openmrs_concept=&quot;5088^TEMPERATURE (C)^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/temperature_c&gt;
    &lt;respiratory_rate openmrs_concept=&quot;5242^RESPIRATORY RATE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/respiratory_rate&gt;
    &lt;weight_kg openmrs_concept=&quot;5089^WEIGHT (KG)^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/weight_kg&gt;
    &lt;height_cm openmrs_concept=&quot;5090^HEIGHT (CM)^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/height_cm&gt;
    &lt;adverse_effects_at_visit openmrs_concept=&quot;1733^ADVERSE EFFECTS AT VISIT^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/adverse_effects_at_visit&gt;
    &lt;adverse_effect multiple=&quot;1&quot; openmrs_concept=&quot;1297^ADVERSE EFFECT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;anemia openmrs_concept=&quot;3^ANEMIA^99DCT&quot;&gt;false&lt;/anemia&gt;
        &lt;other_non-coded openmrs_concept=&quot;5622^OTHER NON-CODED^99DCT&quot;&gt;false&lt;/other_non-coded&gt;
        &lt;lactic_acidosis openmrs_concept=&quot;1458^LACTIC ACIDOSIS^99DCT&quot;&gt;false&lt;/lactic_acidosis&gt;
        &lt;rash_minor openmrs_concept=&quot;1726^RASH, MINOR^99DCT&quot;&gt;false&lt;/rash_minor&gt;
        &lt;peripheral_neuropathy openmrs_concept=&quot;821^PERIPHERAL NEUROPATHY^99DCT&quot;&gt;false&lt;/peripheral_neuropathy&gt;
        &lt;jaundice openmrs_concept=&quot;215^JAUNDICE^99DCT&quot;&gt;false&lt;/jaundice&gt;
        &lt;nightmares openmrs_concept=&quot;2150^NIGHTMARES^99DCT&quot;&gt;false&lt;/nightmares&gt;
        &lt;none openmrs_concept=&quot;1107^NONE^99DCT&quot;&gt;false&lt;/none&gt;
        &lt;rash_severe openmrs_concept=&quot;1728^RASH, SEVERE^99DCT&quot;&gt;false&lt;/rash_severe&gt;
        &lt;joint_pain openmrs_concept=&quot;80^JOINT PAIN^99DCT&quot;&gt;false&lt;/joint_pain&gt;
        &lt;vomiting openmrs_concept=&quot;5980^VOMITING^99DCT&quot;&gt;false&lt;/vomiting&gt;
        &lt;nausea openmrs_concept=&quot;5978^NAUSEA^99DCT&quot;&gt;false&lt;/nausea&gt;
        &lt;hepatitis openmrs_concept=&quot;29^HEPATITIS^99DCT&quot;&gt;false&lt;/hepatitis&gt;
        &lt;lipodystrophy openmrs_concept=&quot;2148^LIPODYSTROPHY^99DCT&quot;&gt;false&lt;/lipodystrophy&gt;
        &lt;rash openmrs_concept=&quot;512^RASH^99DCT&quot;&gt;false&lt;/rash&gt;
        &lt;angio-edema openmrs_concept=&quot;1298^ANGIO-EDEMA^99DCT&quot;&gt;false&lt;/angio-edema&gt;
        &lt;anaphylaxis openmrs_concept=&quot;998^ANAPHYLAXIS^99DCT&quot;&gt;false&lt;/anaphylaxis&gt;
        &lt;rash_moderate openmrs_concept=&quot;1727^RASH, MODERATE^99DCT&quot;&gt;false&lt;/rash_moderate&gt;
    &lt;/adverse_effect&gt;
    &lt;adverse_effect_non-coded openmrs_concept=&quot;1729^ADVERSE EFFECT, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/adverse_effect_non-coded&gt;
    &lt;cd4_count openmrs_concept=&quot;5497^CD4 COUNT^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/cd4_count&gt;
    &lt;cd4_percent openmrs_concept=&quot;730^CD4%^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/cd4_percent&gt;
    &lt;afb_sputum_smear multiple=&quot;0&quot; openmrs_concept=&quot;1444^AFB SPUTUM SMEAR^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/afb_sputum_smear&gt;
    &lt;afb_sputum_smear_1 multiple=&quot;0&quot; openmrs_concept=&quot;1444^AFB SPUTUM SMEAR^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/afb_sputum_smear_1&gt;
    &lt;afb_sputum_smear_2 multiple=&quot;0&quot; openmrs_concept=&quot;1444^AFB SPUTUM SMEAR^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/afb_sputum_smear_2&gt;
    &lt;tb_culture_construct openmrs_concept=&quot;1722^TB CULTURE CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;culture_for_tuberculosis_general multiple=&quot;0&quot; openmrs_concept=&quot;1436^CULTURE FOR TUBERCULOSIS, GENERAL^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/culture_for_tuberculosis_general&gt;
      &lt;tb_culture_source multiple=&quot;0&quot; openmrs_concept=&quot;1595^TB CULTURE SOURCE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/tb_culture_source&gt;
      &lt;other_tb_culture_source_non-coded openmrs_concept=&quot;1596^OTHER TB CULTURE SOURCE NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/other_tb_culture_source_non-coded&gt;
    &lt;/tb_culture_construct&gt;
    &lt;ppd_construct openmrs_concept=&quot;1438^PPD CONSTRUCT^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
      &lt;ppd_qualitative multiple=&quot;0&quot; openmrs_concept=&quot;1435^PPD, QUALITATIVE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/ppd_qualitative&gt;
      &lt;ppd_quantitative openmrs_concept=&quot;1437^PPD, QUANTITATIVE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
            &lt;date xsi:nil=&quot;true&quot;/&gt;
            &lt;time xsi:nil=&quot;true&quot;/&gt;
            &lt;value xsi:nil=&quot;true&quot;/&gt;
      &lt;/ppd_quantitative&gt;
    &lt;/ppd_construct&gt;
    &lt;tb_drug_resistance multiple=&quot;0&quot; openmrs_concept=&quot;1597^TB DRUG RESISTANCE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/tb_drug_resistance&gt;
    &lt;tb_drug_sensitivity_testing openmrs_concept=&quot;1339^TUBERCULOSIS DRUG SENSITIVITY TESTING, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/tb_drug_sensitivity_testing&gt;
    &lt;rapid_plasmin_reagent multiple=&quot;0&quot; openmrs_concept=&quot;1478^RAPID PLASMIN REAGENT^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/rapid_plasmin_reagent&gt;
    &lt;hemoglobin openmrs_concept=&quot;21^HEMOGLOBIN^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/hemoglobin&gt;
    &lt;hematocrit openmrs_concept=&quot;1015^HEMATOCRIT^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/hematocrit&gt;
    &lt;white_blood_cells openmrs_concept=&quot;678^WHITE BLOOD CELLS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/white_blood_cells&gt;
    &lt;neutrophils openmrs_concept=&quot;1022^NEUTROPHILS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/neutrophils&gt;
    &lt;lymphocytes openmrs_concept=&quot;1021^LYMPHOCYTES^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/lymphocytes&gt;
    &lt;platelets openmrs_concept=&quot;729^PLATELETS^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/platelets&gt;
    &lt;serum_glutamic-oxaloacetic_transaminase openmrs_concept=&quot;653^SERUM GLUTAMIC-OXALOACETIC TRANSAMINASE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/serum_glutamic-oxaloacetic_transaminase&gt;
    &lt;serum_glutamic-pyruvic_transaminase openmrs_concept=&quot;654^SERUM GLUTAMIC-PYRUVIC TRANSAMINASE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/serum_glutamic-pyruvic_transaminase&gt;
    &lt;hiv_viral_load openmrs_concept=&quot;856^HIV VIRAL LOAD^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/hiv_viral_load&gt;
    &lt;urinalysis openmrs_concept=&quot;1542^URINALYSIS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/urinalysis&gt;
    &lt;serum_creatinine openmrs_concept=&quot;790^SERUM CREATININE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/serum_creatinine&gt;
    &lt;esr openmrs_concept=&quot;1477^ESR^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/esr&gt;
    &lt;total_cholesterol openmrs_concept=&quot;1006^TOTAL CHOLESTEROL^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/total_cholesterol&gt;
    &lt;serum_glucose openmrs_concept=&quot;887^SERUM GLUCOSE^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/serum_glucose&gt;
    &lt;blood_urea_nitrogen openmrs_concept=&quot;857^BLOOD UREA NITROGEN^99DCT&quot; openmrs_datatype=&quot;NM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/blood_urea_nitrogen&gt;
    &lt;vaginal_smear openmrs_concept=&quot;1475^VAGINAL SMEAR^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/vaginal_smear&gt;
    &lt;malarial_smear multiple=&quot;0&quot; openmrs_concept=&quot;32^MALARIAL SMEAR^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/malarial_smear&gt;
    &lt;sexually_transmitted_disease_other openmrs_concept=&quot;1374^SEXUALLY TRANSMITTED DISEASE OTHER^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/sexually_transmitted_disease_other&gt;
    &lt;hiv_pcr openmrs_concept=&quot;1553^HIV PCR^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/hiv_pcr&gt;
    &lt;laboratory_tests_other openmrs_concept=&quot;1341^LABORATORY TESTS OTHER^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/laboratory_tests_other&gt;
    &lt;chest_xray_comments openmrs_concept=&quot;1342^CHEST XRAY COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/chest_xray_comments&gt;
    &lt;other_radiology_exam_comments openmrs_concept=&quot;1730^OTHER RADIOLOGY EXAM COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/other_radiology_exam_comments&gt;
    &lt;clinical_impression_comments openmrs_concept=&quot;1364^CLINICAL IMPRESSION COMMENTS^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/clinical_impression_comments&gt;
    &lt;current_opportunistic_infection openmrs_concept=&quot;1401^CURRENT OPPORTUNISTIC INFECTION^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_1 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_1&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_2 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_2&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_3 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_3&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_4 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_4&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_5 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_5&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_6 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_6&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_7 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_7&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_8 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_8&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_9 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_9&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_10 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_10&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_11 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_11&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_12 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_12&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_13 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_13&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_14 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_14&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_15 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_15&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_16 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_16&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_17 multiple=&quot;0&quot; openmrs_concept=&quot;1607^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_17&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_non-coded openmrs_concept=&quot;1731^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_non-coded&gt;
    &lt;current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_non-coded_1 openmrs_concept=&quot;1731^CURRENT OPPORTUNISTIC INFECTION OR COMORBIDITY, CONFIRMED OR PRESUMED, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/current_opportunistic_infection_or_comorbidity_confirmed_or_presumed_non-coded_1&gt;
    &lt;changes_to_prophylaxis_non-coded openmrs_concept=&quot;1732^CHANGES TO PROPHYLAXIS, NON-CODED^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/changes_to_prophylaxis_non-coded&gt;
    &lt;antiretroviral_plan multiple=&quot;0&quot; openmrs_concept=&quot;1255^ANTIRETROVIRAL PLAN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/antiretroviral_plan&gt;
    &lt;tuberculosis_treatment_plan multiple=&quot;0&quot; openmrs_concept=&quot;1268^TUBERCULOSIS TREATMENT PLAN^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/tuberculosis_treatment_plan&gt;
    &lt;financial_aid openmrs_concept=&quot;1398^FINANCIAL AID^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/financial_aid&gt;
    &lt;financial_aid_comment openmrs_concept=&quot;1516^FINANCIAL AID COMMENT^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/financial_aid_comment&gt;
    &lt;assistance_with_transport openmrs_concept=&quot;990^ASSISTANCE WITH TRANSPORT^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/assistance_with_transport&gt;
    &lt;assistance_with_transport_comment openmrs_concept=&quot;1520^ASSISTANCE WITH TRANSPORT COMMENT^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/assistance_with_transport_comment&gt;
    &lt;nutritional_aid openmrs_concept=&quot;1400^NUTRITIONAL AID^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/nutritional_aid&gt;
    &lt;nutritional_aid_comment openmrs_concept=&quot;1517^NUTRITIONAL AID COMMENT^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/nutritional_aid_comment&gt;
    &lt;aid_for_construction_or_repair_of_the_house openmrs_concept=&quot;1396^AID FOR CONSTRUCTION OR REPAIR OF THE HOUSE^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/aid_for_construction_or_repair_of_the_house&gt;
    &lt;aid_for_construction_or_repair_of_the_house_comment openmrs_concept=&quot;1521^AID FOR CONSTRUCTION OR REPAIR OF THE HOUSE COMMENT^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/aid_for_construction_or_repair_of_the_house_comment&gt;
    &lt;school_aid_for_children openmrs_concept=&quot;1394^SCHOOL AID FOR CHILDREN^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/school_aid_for_children&gt;
    &lt;school_aid_for_children_comment openmrs_concept=&quot;1518^SCHOOL AID FOR CHILDREN COMMENT^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/school_aid_for_children_comment&gt;
    &lt;formation_for_work openmrs_concept=&quot;1397^JOB TRAINING^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/formation_for_work&gt;
    &lt;job_training_comment openmrs_concept=&quot;1522^JOB TRAINING COMMENT^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/job_training_comment&gt;
    &lt;assistance_with_funerals openmrs_concept=&quot;1492^ASSISTANCE WITH FUNERALS^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/assistance_with_funerals&gt;
    &lt;assistance_with_funerals_comment openmrs_concept=&quot;1519^ASSISTANCE WITH FUNERALS COMMENT^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/assistance_with_funerals_comment&gt;
    &lt;received_food multiple=&quot;0&quot; openmrs_concept=&quot;1806^PATIENT RECEIVED FOOD PACKAGE^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/received_food&gt;
    &lt;food_date openmrs_concept=&quot;1757^NUTRITIONAL ASSISTANCE RECEIVED DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/food_date&gt;
    &lt;clinical_progress multiple=&quot;0&quot; openmrs_concept=&quot;1463^CLINICAL PROGRESS^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/clinical_progress&gt;
    &lt;good_followup_by_community_health_worker openmrs_concept=&quot;1724^GOOD FOLLOWUP BY COMMUNITY HEALTH WORKER^99DCT&quot; openmrs_datatype=&quot;BIT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value infopath_boolean_hack=&quot;1&quot; xsi:nil=&quot;true&quot;/&gt;
    &lt;/good_followup_by_community_health_worker&gt;
    &lt;accompagnateur_visit_time openmrs_concept=&quot;1810^TIME OF DAILY ACCOMPAGNATEUR VISIT^99DCT&quot; openmrs_datatype=&quot;TM&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/accompagnateur_visit_time&gt;
    &lt;comments_at_conclusion_of_examination openmrs_concept=&quot;1620^COMMENTS AT CONCLUSION OF EXAMINATION^99DCT&quot; openmrs_datatype=&quot;ST&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/comments_at_conclusion_of_examination&gt;
    &lt;return_visit_date openmrs_concept=&quot;5096^RETURN VISIT DATE^99DCT&quot; openmrs_datatype=&quot;DT&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/return_visit_date&gt;
  &lt;/obs&gt;
  &lt;problem_list openmrs_concept=&quot;1284^PROBLEM LIST^99DCT&quot; openmrs_datatype=&quot;ZZ&quot;&gt;
    &lt;problem_added multiple=&quot;0&quot; openmrs_concept=&quot;6042^PROBLEM ADDED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/problem_added&gt;
    &lt;problem_resolved multiple=&quot;0&quot; openmrs_concept=&quot;6097^PROBLEM RESOLVED^99DCT&quot; openmrs_datatype=&quot;CWE&quot;&gt;
        &lt;date xsi:nil=&quot;true&quot;/&gt;
        &lt;time xsi:nil=&quot;true&quot;/&gt;
        &lt;value xsi:nil=&quot;true&quot;/&gt;
    &lt;/problem_resolved&gt;
  &lt;/problem_list&gt;
  &lt;other/&gt;&lt;/form&gt;" xslt="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;!--
OpenMRS FormEntry Form HL7 Translation

This XSLT is used to translate OpenMRS forms from XML into HL7 2.5 format

@author Burke Mamlin, MD
@author Ben Wolfe
@version 1.9.5

1.9.5 - allow for organizing sections under &quot;obs&quot; section
1.9.4 - add support for message uid (as HL7 control id) and transform of patient.health_center to Discharge to Location (PV1-37)
1.9.3 - fixed rounding error on timestamp (tenths of seconds getting rounded up, causing &quot;60&quot; seconds in some cases) 
1.9.2 - first generally useful version
--&gt;

&lt;xsl:stylesheet version=&quot;2.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:fn=&quot;http://www.w3.org/2005/xpath-functions&quot; xmlns:xdt=&quot;http://www.w3.org/2005/xpath-datatypes&quot;&gt;
	&lt;xsl:output method=&quot;text&quot; version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; indent=&quot;no&quot;/&gt;

&lt;xsl:variable name=&quot;SENDING-APPLICATION&quot;&gt;FORMENTRY&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;SENDING-FACILITY&quot;&gt;AMRS.ELD&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;RECEIVING-APPLICATION&quot;&gt;HL7LISTENER&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;RECEIVING-FACILITY&quot;&gt;AMRS.ELD&lt;/xsl:variable&gt;
&lt;xsl:variable name=&quot;PATIENT-AUTHORITY&quot;&gt;&lt;/xsl:variable&gt; &lt;!-- leave blank for internal id, max 20 characters --&gt;
                                                       &lt;!-- for now, must match patient_identifier_type.name --&gt;
&lt;xsl:variable name=&quot;FORM-AUTHORITY&quot;&gt;AMRS.ELD.FORMID&lt;/xsl:variable&gt; &lt;!-- max 20 characters --&gt;

&lt;xsl:template match=&quot;/&quot;&gt;
	&lt;xsl:apply-templates /&gt;
&lt;/xsl:template&gt;

&lt;!-- Form template --&gt;
&lt;xsl:template match=&quot;form&quot;&gt;
	&lt;!-- MSH Header --&gt;
	&lt;xsl:text&gt;MSH|^~\&amp;amp;&lt;/xsl:text&gt;   &lt;!-- Message header, field separator, and encoding characters --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-3 Sending application --&gt;
	&lt;xsl:value-of select=&quot;$SENDING-APPLICATION&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-4 Sending facility --&gt;
	&lt;xsl:value-of select=&quot;$SENDING-FACILITY&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-5 Receiving application --&gt;
	&lt;xsl:value-of select=&quot;$RECEIVING-APPLICATION&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-6 Receiving facility --&gt;
	&lt;xsl:value-of select=&quot;$RECEIVING-FACILITY&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-7 Date/time message sent --&gt;
	&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;current-dateTime()&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-8 Security --&gt;
	&lt;xsl:text&gt;|ORU^R01&lt;/xsl:text&gt;       &lt;!-- MSH-9 Message type ^ Event type (observation report unsolicited) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-10 Message control ID --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;header/uid&quot;&gt;
			&lt;xsl:value-of select=&quot;header/uid&quot; /&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;patient/patient.patient_id&quot; /&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;current-dateTime()&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|P&lt;/xsl:text&gt;             &lt;!-- MSH-11 Processing ID --&gt;
	&lt;xsl:text&gt;|2.5&lt;/xsl:text&gt;           &lt;!-- MSH-12 HL7 version --&gt;
	&lt;xsl:text&gt;|1&lt;/xsl:text&gt;             &lt;!-- MSH-13 Message sequence number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-14 Continuation Pointer --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-15 Accept Acknowledgement Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-16 Application Acknowledgement Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-17 Country Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-18 Character Set --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-19 Principal Language of Message --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-20 Alternate Character Set Handling Scheme --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- MSH-21 Message Profile Identifier --&gt;
	&lt;xsl:value-of select=&quot;@id&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;
	&lt;xsl:value-of select=&quot;$FORM-AUTHORITY&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;

	&lt;!-- PID header --&gt;
	&lt;xsl:text&gt;PID&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-1 Set ID --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-2 (deprecated) Patient ID --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-3 Patient Identifier List --&gt;
	&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
		&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.patient_id&quot; /&gt;
		&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
		&lt;xsl:with-param name=&quot;type&quot; select=&quot;L&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:if test=&quot;patient/patient.previous_mrn and string-length(patient/patient.previous_mrn) &gt; 0&quot;&gt;
		&lt;xsl:text&gt;~&lt;/xsl:text&gt;
		&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
			&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.previous_mrn&quot; /&gt;
			&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
			&lt;xsl:with-param name=&quot;type&quot; select=&quot;PRIOR&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:if&gt;
	&lt;!-- Additional patient identifiers --&gt;
	&lt;!-- This example is for an MTCT-PLUS identifier used in the AMPATH project in Kenya (skipped if not present) --&gt;
	&lt;xsl:if test=&quot;patient/patient.mtctplus_id and string-length(patient/patient.mtctplus_id) &gt; 0&quot;&gt;
		&lt;xsl:text&gt;~&lt;/xsl:text&gt;
		&lt;xsl:call-template name=&quot;patient_id&quot;&gt;
			&lt;xsl:with-param name=&quot;pid&quot; select=&quot;patient/patient.mtctplus_id&quot; /&gt;
			&lt;xsl:with-param name=&quot;auth&quot; select=&quot;$PATIENT-AUTHORITY&quot; /&gt;
			&lt;xsl:with-param name=&quot;type&quot; select=&quot;MTCTPLUS&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:if&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-4 (deprecated) Alternate patient ID --&gt;
	&lt;!-- PID-5 Patient name --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- Family name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.family_name&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Given name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.given_name&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Middle name --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.middle_name&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-6 Mother&apos;s maiden name --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PID-7 Date/Time of Birth --&gt;
	&lt;xsl:value-of select=&quot;patient/patient.date_of_birth&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
	
	&lt;!-- PV1 header --&gt;
	&lt;xsl:text&gt;PV1&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-1 Sub ID --&gt;
	&lt;xsl:text&gt;|O&lt;/xsl:text&gt;             &lt;!-- PV1-2 Patient class (O = outpatient) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-3 Patient location --&gt;
	&lt;xsl:value-of select=&quot;encounter/encounter.location_id&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-4 Admission type (2 = return) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-5 Pre-Admin Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-6 Prior Patient Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-7 Attending Doctor --&gt;
	&lt;xsl:value-of select=&quot;encounter/encounter.provider_id&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-8 Referring Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-9 Consulting Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-10 Hospital Service --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-11 Temporary Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-12 Preadmin Test Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-13 Re-adminssion Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-14 Admit Source --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-15 Ambulatory Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-16 VIP Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-17 Admitting Doctor --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-18 Patient Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-19 Visit Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-20 Financial Class --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-21 Charge Price Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-22 Courtesy Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-23 Credit Rating --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-24 Contract Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-25 Contract Effective Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-26 Contract Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-27 Contract Period --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-28 Interest Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-29 Transfer to Bad Debt Code --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-30 Transfer to Bad Debt Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-31 Bad Debt Agency Code --&gt;
  &lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-31 Bad Debt Transfer Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-33 Bad Debt Recovery Amount --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-34 Delete Account Indicator --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-35 Delete Account Date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-36 Discharge Disposition --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-37 Discharge To Location --&gt;
	&lt;xsl:if test=&quot;patient/patient.health_center&quot;&gt;
		&lt;xsl:value-of select=&quot;replace(patient/patient.health_center,&apos;\^&apos;,&apos;&amp;amp;&apos;)&quot; /&gt;
	&lt;/xsl:if&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-38 Diet Type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-39 Servicing Facility --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-40 Bed Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-41 Account Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-42 Pending Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-43 Prior Temporary Location --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-44 Admit Date/Time --&gt;
	&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;encounter/encounter.encounter_datetime&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-45 Discharge Date/Time --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-46 Current Patient Balance --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-47 Total Charges --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-48 Total Adjustments --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-49 Total Payments --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- PV1-50 Alternate Visit ID --&gt;
	&lt;xsl:text&gt;|V&lt;/xsl:text&gt;             &lt;!-- PV1-51 Visit Indicator --&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- We use encounter date as the timestamp for each observation --&gt;
	&lt;xsl:variable name=&quot;encounterTimestamp&quot;&gt;
		&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
			&lt;xsl:with-param name=&quot;date&quot; select=&quot;encounter/encounter.encounter_datetime&quot; /&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:variable&gt;
	
	&lt;!-- ORC Common Order Segment --&gt;
	&lt;xsl:text&gt;ORC&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|RE&lt;/xsl:text&gt;            &lt;!-- ORC-1 Order Control (RE = obs to follow) --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-2 Placer Order Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-3 Filler Order Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-4 Placer Group Number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-5 Order Status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-6 Response Flag --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-7 Quantity/Timing --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-8 Parent --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-9 Date/Time of Transaction --&gt;
	&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
		&lt;xsl:with-param name=&quot;date&quot; select=&quot;xs:dateTime(header/date_entered)&quot; /&gt;
	&lt;/xsl:call-template&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- ORC-10 Entered By --&gt;
	&lt;xsl:value-of select=&quot;header/enterer&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- Observation(s) --&gt;
	&lt;!-- &lt;xsl:variable name=&quot;obsList&quot; select=&quot;obs/*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]&quot; /&gt; --&gt;
	&lt;xsl:variable name=&quot;obsList&quot; select=&quot;obs/*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]|obs/*[not(@openmrs_concept)]/*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]&quot; /&gt;
	&lt;xsl:variable name=&quot;obsListCount&quot; select=&quot;count($obsList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;!-- Observation OBR --&gt;
	&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
	&lt;xsl:text&gt;1&lt;/xsl:text&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
	&lt;xsl:value-of select=&quot;obs/@openmrs_concept&quot; /&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

	&lt;!-- observation OBXs --&gt;
	&lt;xsl:for-each select=&quot;$obsList&quot;&gt;
		&lt;xsl:choose&gt;
			&lt;xsl:when test=&quot;value&quot;&gt;
				&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
					&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
					&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
					&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
					&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
					&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
					&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
					&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
				&lt;/xsl:call-template&gt;
			&lt;/xsl:when&gt;
			&lt;xsl:otherwise&gt;
				&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
				&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
						&lt;xsl:with-param name=&quot;subId&quot; select=&quot;concat($setId,position())&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:for-each&gt;
			&lt;/xsl:otherwise&gt;
		&lt;/xsl:choose&gt;
	&lt;/xsl:for-each&gt;
	
	&lt;!-- Grouped observation(s) --&gt;
	&lt;!-- &lt;xsl:variable name=&quot;obsGroupList&quot; select=&quot;obs/*[@openmrs_concept and not(date) and *[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]]&quot; /&gt; --&gt;
	&lt;xsl:variable name=&quot;obsGroupList&quot; select=&quot;obs/*[@openmrs_concept and not(date) and *[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]]|obs/*[not(@openmrs_concept)]/*[@openmrs_concept and not(date) and *[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]]&quot; /&gt;
	&lt;xsl:variable name=&quot;obsGroupListCount&quot; select=&quot;count($obsGroupList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:for-each select=&quot;$obsGroupList&quot;&gt;
		&lt;!-- Observation OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + position()&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
		
		&lt;!-- Generate OBXs --&gt;
		&lt;xsl:for-each select=&quot;*[(@openmrs_concept and value and value/text() != &apos;&apos;) or *[@openmrs_concept and text()=&apos;true&apos;]]&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;value&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
						&lt;xsl:with-param name=&quot;subId&quot; select=&quot;1&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;
					&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
						&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
							&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
							&lt;xsl:with-param name=&quot;subId&quot; select=&quot;concat(&apos;1.&apos;,position())&quot; /&gt;
							&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
							&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
							&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
						&lt;/xsl:call-template&gt;
					&lt;/xsl:for-each&gt;
				&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:for-each&gt;
	&lt;/xsl:for-each&gt;

	&lt;!-- Problem list(s) --&gt;
	&lt;xsl:variable name=&quot;problemList&quot; select=&quot;problem_list/*[value[text() != &apos;&apos;]]&quot; /&gt;
	&lt;xsl:variable name=&quot;problemListCount&quot; select=&quot;count($problemList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:if test=&quot;$problemList&quot;&gt;
		&lt;!-- Problem list OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + $obsGroupListCount + 1&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;problem_list/@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;

		&lt;!-- Problem list OBXs --&gt;
		&lt;xsl:for-each select=&quot;$problemList&quot;&gt;
			&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
				&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
				&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;&apos;CWE&apos;&quot; /&gt;
				&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
				&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
				&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
				&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
			&lt;/xsl:call-template&gt;		
		&lt;/xsl:for-each&gt;
	&lt;/xsl:if&gt;
	
	&lt;!-- Orders --&gt;
	&lt;xsl:variable name=&quot;orderList&quot; select=&quot;orders/*[*[@openmrs_concept and ((value and value/text() != &apos;&apos;) or *[@openmrs_concept and text() = &apos;true&apos;])]]&quot; /&gt;
	&lt;xsl:variable name=&quot;orderListCount&quot; select=&quot;count($orderList)&quot; as=&quot;xs:integer&quot; /&gt;
	&lt;xsl:for-each select=&quot;$orderList&quot;&gt;
		&lt;!-- Order section OBR --&gt;
		&lt;xsl:text&gt;OBR&lt;/xsl:text&gt;            &lt;!-- Message type --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-1 Set ID --&gt;
		&lt;xsl:value-of select=&quot;$obsListCount + $obsGroupListCount + $problemListCount + 1&quot; /&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-2 Placer order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-3 Filler order number --&gt;
		&lt;xsl:text&gt;|&lt;/xsl:text&gt;              &lt;!-- OBR-4 OBR concept --&gt;
		&lt;xsl:value-of select=&quot;@openmrs_concept&quot; /&gt;
		&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;       &lt;!-- new line --&gt;
	
		&lt;!-- Order OBXs --&gt;
		&lt;xsl:for-each select=&quot;*[@openmrs_concept and ((value and value/text() != &apos;&apos;) or *[@openmrs_concept and text() = &apos;true&apos;])]&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;value&quot;&gt;
					&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
						&lt;xsl:with-param name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
						&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;@openmrs_datatype&quot; /&gt;
						&lt;xsl:with-param name=&quot;units&quot; select=&quot;@openmrs_units&quot; /&gt;
						&lt;xsl:with-param name=&quot;concept&quot; select=&quot;@openmrs_concept&quot; /&gt;
						&lt;xsl:with-param name=&quot;date&quot; select=&quot;date/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;time&quot; select=&quot;time/text()&quot; /&gt;
						&lt;xsl:with-param name=&quot;value&quot; select=&quot;value&quot; /&gt;
						&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
					&lt;/xsl:call-template&gt;
				&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;
					&lt;xsl:variable name=&quot;setId&quot; select=&quot;position()&quot; /&gt;
					&lt;xsl:for-each select=&quot;*[@openmrs_concept and text() = &apos;true&apos;]&quot;&gt;
						&lt;xsl:call-template name=&quot;obsObx&quot;&gt;
							&lt;xsl:with-param name=&quot;setId&quot; select=&quot;$setId&quot; /&gt;
							&lt;xsl:with-param name=&quot;subId&quot; select=&quot;position()&quot; /&gt;
							&lt;xsl:with-param name=&quot;datatype&quot; select=&quot;../@openmrs_datatype&quot; /&gt;
							&lt;xsl:with-param name=&quot;units&quot; select=&quot;../@openmrs_units&quot; /&gt;
							&lt;xsl:with-param name=&quot;concept&quot; select=&quot;../@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;date&quot; select=&quot;../date/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;time&quot; select=&quot;../time/text()&quot; /&gt;
							&lt;xsl:with-param name=&quot;value&quot; select=&quot;@openmrs_concept&quot; /&gt;
							&lt;xsl:with-param name=&quot;encounterTimestamp&quot; select=&quot;$encounterTimestamp&quot; /&gt;
						&lt;/xsl:call-template&gt;
					&lt;/xsl:for-each&gt;
				&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:for-each&gt;	
	&lt;/xsl:for-each&gt;
	
&lt;/xsl:template&gt;

&lt;!-- Patient Identifier (CX) generator --&gt;
&lt;xsl:template name=&quot;patient_id&quot;&gt;
	&lt;xsl:param name=&quot;pid&quot; /&gt;
	&lt;xsl:param name=&quot;auth&quot; /&gt;
	&lt;xsl:param name=&quot;type&quot; /&gt;
	&lt;xsl:value-of select=&quot;$pid&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Check digit --&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Check Digit Scheme --&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Assigning Authority --&gt;
	&lt;xsl:value-of select=&quot;$auth&quot; /&gt;
	&lt;xsl:text&gt;^&lt;/xsl:text&gt;              &lt;!-- Identifier Type --&gt;
	&lt;xsl:value-of select=&quot;$type&quot; /&gt;
&lt;/xsl:template&gt;

&lt;!-- OBX Generator --&gt;
&lt;xsl:template name=&quot;obsObx&quot;&gt;
	&lt;xsl:param name=&quot;setId&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;subId&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;datatype&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:param name=&quot;concept&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:param name=&quot;date&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;time&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;value&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;units&quot; required=&quot;no&quot;&gt;&lt;/xsl:param&gt;
	&lt;xsl:param name=&quot;encounterTimestamp&quot; required=&quot;yes&quot; /&gt;
	&lt;xsl:text&gt;OBX&lt;/xsl:text&gt;                     &lt;!-- Message type --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Set ID --&gt;
	&lt;xsl:value-of select=&quot;$setId&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Observation datatype --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;BIT&apos;&quot;&gt;
			&lt;xsl:text&gt;NM&lt;/xsl:text&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$datatype&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Concept (what was observed --&gt;
	&lt;xsl:value-of select=&quot;$concept&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Sub-ID --&gt;
	&lt;xsl:value-of select=&quot;$subId&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Value --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;TS&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;DT&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;TM&apos;&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Time&quot;&gt;
				&lt;xsl:with-param name=&quot;time&quot; select=&quot;$value&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$datatype = &apos;BIT&apos;&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;$value = &apos;0&apos; or upper-case($value) = &apos;FALSE&apos;&quot;&gt;0&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;1&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$value&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Units --&gt;
	&lt;xsl:value-of select=&quot;$units&quot; /&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Reference range --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Abnormal flags --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Probability --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Nature of abnormal test --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Observation result status --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Effective date --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- User defined access checks --&gt;
	&lt;xsl:text&gt;|&lt;/xsl:text&gt;                       &lt;!-- Date time of observation --&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$date and $time&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Timestamp&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;dateTime($date,$time)&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$date&quot;&gt;
			&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$date&quot; /&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$encounterTimestamp&quot; /&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:text&gt;&amp;#x000d;&lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted timestamp --&gt;
&lt;xsl:template name=&quot;hl7Timestamp&quot;&gt;
	&lt;xsl:param name=&quot;date&quot; /&gt;
	&lt;xsl:if test=&quot;string($date) != &apos;&apos;&quot;&gt;
		&lt;xsl:value-of select=&quot;concat(year-from-dateTime($date),format-number(month-from-dateTime($date),&apos;00&apos;),format-number(day-from-dateTime($date),&apos;00&apos;),format-number(hours-from-dateTime($date),&apos;00&apos;),format-number(minutes-from-dateTime($date),&apos;00&apos;),format-number(floor(seconds-from-dateTime($date)),&apos;00&apos;))&quot; /&gt;
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted date --&gt;
&lt;xsl:template name=&quot;hl7Date&quot;&gt;
	&lt;xsl:param name=&quot;date&quot; /&gt;
	&lt;xsl:if test=&quot;string($date) != &apos;&apos;&quot;&gt;
		&lt;xsl:choose&gt;
			&lt;xsl:when test=&quot;contains(string($date),&apos;T&apos;)&quot;&gt;
				&lt;xsl:call-template name=&quot;hl7Date&quot;&gt;
					&lt;xsl:with-param name=&quot;date&quot; select=&quot;xs:date(substring-before($date,&apos;T&apos;))&quot; /&gt;
				&lt;/xsl:call-template&gt;
			&lt;/xsl:when&gt;
			&lt;xsl:otherwise&gt;
					&lt;xsl:value-of select=&quot;concat(year-from-date($date),format-number(month-from-date($date),&apos;00&apos;),format-number(day-from-date($date),&apos;00&apos;))&quot; /&gt;
			&lt;/xsl:otherwise&gt;
		&lt;/xsl:choose&gt;				
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;!-- Generate HL7-formatted time --&gt;
&lt;xsl:template name=&quot;hl7Time&quot;&gt;
	&lt;xsl:param name=&quot;time&quot; /&gt;
	&lt;xsl:if test=&quot;$time != &apos;&apos;&quot;&gt;
		&lt;xsl:value-of select=&quot;concat(format-number(hours-from-time($time),&apos;00&apos;),format-number(minutes-from-time($time),&apos;00&apos;),format-number(floor(seconds-from-time($time)),&apos;00&apos;))&quot; /&gt;
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;" creator="1" date_created="2006-07-18 11:02:38.0" changed_by="15971" date_changed="2007-11-15 20:23:08.0" retired="false" retired_reason="" guid="4e7c3d7a-26fe-102b-80cb-0017a47871b2"/>
</dataset>
