<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<!--
  - Application context definition for "springDispatcher" DispatcherServlet.
  -->

	<beans>
	

		<!--  **************************  MESSAGE CONFIGURATION  *************************  -->
	
		<!-- Configure mail session, message sender, and message preparator -->
		<bean id="mailSession" class="org.springframework.jndi.JndiObjectFactoryBean">
		    <property name="jndiName"><value>java:comp/env/mail/OpenmrsMailSession</value></property>
		</bean>
		
		<bean id="mailMessageSender" class="org.openmrs.notification.mail.MailMessageSender">
			<property name="session"><ref bean="mailSession"/></property>
		</bean> 
		
		<bean id="mailMessagePreparator" class="org.openmrs.notification.mail.velocity.VelocityMessagePreparator"/>

		
		<!--  **************************  DATA ACCESS CONFIGURATION  *************************  -->
	
		<!-- List all the data access objects -->
		<bean id="administrationDAO" class="org.openmrs.api.db.hibernate.HibernateAdministrationDAO"/>
		<bean id="conceptDAO" class="org.openmrs.api.db.hibernate.HibernateConceptDAO"/>
		<bean id="encounterDAO" class="org.openmrs.api.db.hibernate.HibernateEncounterDAO"/>
		<bean id="formDAO" class="org.openmrs.api.db.hibernate.HibernateFormDAO"/>
		<bean id="noteDAO" class="org.openmrs.api.db.hibernate.HibernateNoteDAO"/>
		<bean id="obsDAO" class="org.openmrs.api.db.hibernate.HibernateObsDAO"/>
		<bean id="orderDAO" class="org.openmrs.api.db.hibernate.HibernateOrderDAO"/>
		<bean id="patientDAO" class="org.openmrs.api.db.hibernate.HibernatePatientDAO"/>
		<bean id="patientSetDAO" class="org.openmrs.api.db.hibernate.HibernatePatientSetDAO"/>
		<bean id="templateDAO" class="org.openmrs.api.db.hibernate.HibernateTemplateDAO"/>
		<bean id="userDAO" class="org.openmrs.api.db.hibernate.HibernateUserDAO"/>

		<!-- Single data acccess context -->
		<bean id="daoContext" class="org.openmrs.api.db.hibernate.HibernateDAOContext">
			<property name="administrationDAO"><ref bean="administrationDAO"/></property>
	    	<property name="conceptDAO"><ref bean="conceptDAO"/></property>
	    	<property name="encounterDAO"><ref bean="encounterDAO"/></property>
	    	<property name="formDAO"><ref bean="formDAO"/></property>
	    	<property name="noteDAO"><ref bean="noteDAO"/></property>
	    	<property name="obsDAO"><ref bean="obsDAO"/></property>
	    	<property name="orderDAO"><ref bean="orderDAO"/></property>
	    	<property name="patientDAO"><ref bean="patientDAO"/></property>
	    	<property name="patientSetDAO"><ref bean="patientSetDAO"/></property>    	
	    	<property name="templateDAO"><ref bean="templateDAO"/></property>
	    	<property name="userDAO"><ref bean="userDAO"/></property>
		</bean>	

		
		<!--  **************************  APP CONTEXT CONFIGURATION  *************************  -->
	
		<!-- Single application context (our own context, not Spring's ApplicationContext
		     NOTE:  There will be 100's of Context objects in memory.  This is just a general
		            one that should be used by the services layer.  I would like to refactor
		            this class so that it is used separately from the user context. (JMIRANDA)
		-->
		<bean id="context" class="org.openmrs.api.context.Context">
	        <property name="daoContext"><ref bean="daoContext"/></property>
		</bean>	
	
		
		<!--  ******************************  SERVICES  ****************************** -->
	
		<!-- USAGE:  Inject this object into the controller or service layer object of your choice. -->
		<!-- List all of the services that exist -->
	    <bean id="messageService" class="org.openmrs.api.MessageServiceImpl">
	        <property name="context"><ref bean="context"/></property>
	        <property name="messageSender"><ref bean="mailMessageSender"/></property>        
	        <property name="messagePreparator"><ref bean="mailMessagePreparator"/></property>        
	    </bean>   
		
	
	
		<!--  **************************  VIEW RESOLVER / CONTROLLERS  *************************  -->
	
		<bean id="jspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
			<property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
			<property name="prefix" value="/WEB-INF/view" />
			<property name="suffix" value=".jsp"/>
		</bean>
	
	    <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
			<property name="interceptors">
				<list>
					<ref bean="localeChangeInterceptor"/>
				</list>
			</property>
	        <property name="mappings">
	            <props>
					<prop key="**/orderType.list">orderTypeList</prop>
					<prop key="**/orderType.form">orderTypeForm</prop>
					<prop key="**/patient.form">patientForm</prop>
					<prop key="**/newPatient.form">newPatientForm</prop>
					<prop key="**/tribe.list">tribeList</prop>
					<prop key="**/tribe.form">tribeForm</prop>
					<prop key="**/patientIdentifierType.list">patientIdentifierTypeList</prop>
					<prop key="**/patientIdentifierType.form">patientIdentifierTypeForm</prop>
					<prop key="**/obs.form">obsForm</prop>
					<prop key="**/mimeType.list">mimeTypeList</prop>
					<prop key="**/mimeType.form">mimeTypeForm</prop>
					<prop key="**/user.list">userList</prop>
					<prop key="**/user.form">userForm</prop>
					<prop key="**/role.list">roleList</prop>
					<prop key="**/role.form">roleForm</prop>
					<prop key="**/privilege.list">privilegeList</prop>
					<prop key="**/privilege.form">privilegeForm</prop>
					<prop key="**/group.list">groupList</prop>
					<prop key="**/group.form">groupForm</prop>
					<prop key="**/encounter.form">encounterForm</prop>
					<prop key="**/encounterType.list">encounterTypeList</prop>
					<prop key="**/encounterType.form">encounterTypeForm</prop>
					<prop key="**/location.list">locationList</prop>
					<prop key="**/location.form">locationForm</prop>
					<prop key="**/tribe.htm">tribeListTaskpane</prop>
					<prop key="**/concept.form">conceptForm</prop>
					<prop key="**/dictionary/concept.htm">conceptView</prop>
					<prop key="**/conceptClass.list">conceptClassList</prop>
					<prop key="**/conceptClass.form">conceptClassForm</prop>
					<prop key="**/conceptDatatype.list">conceptDatatypeList</prop>
					<prop key="**/conceptDatatype.form">conceptDatatypeForm</prop>
					<prop key="**/conceptProposal.list">conceptProposalList</prop>
					<prop key="**/conceptProposal.form">conceptProposalForm</prop>
					<prop key="**/conceptWord.form">conceptWordForm</prop>
					<prop key="**/conceptSetDerived.form">conceptSetDerivedForm</prop>
					<prop key="**/report.list">reportList</prop>
					<prop key="**/report.form">reportForm</prop>
					<prop key="**/analysis.list">otfaController</prop>
					<prop key="**/analysis.form">otfaActionController</prop>
					<prop key="**/formDesign.form">formDesignForm</prop>
					<prop key="**/formEdit.form">formEditForm</prop>
					<prop key="**/form.list">formList</prop>
					<prop key="**/field.form">fieldForm</prop>
					<prop key="**/field.list">fieldList</prop>
					<prop key="**/fieldType.form">fieldTypeForm</prop>
					<prop key="**/fieldType.list">fieldTypeList</prop>
					<prop key="**/options.form">optionsForm</prop>
					<prop key="**/patientSummary.form">patientSummaryForm</prop>
					<prop key="**/*.htm">springController</prop>
	            </props>
	        </property>
	    </bean>

		<bean id="springController" class="org.openmrs.web.controller.SpringController"/>
	    
	    <!-- ================================ -->	    
	    <!-- ====== Observation Sector ====== -->
	    <!-- ================================ -->

			<!-- ** Mime Type ** -->
			
				<bean id="obsForm" class="org.openmrs.web.controller.observation.ObsFormController">
					<property name="commandName"><value>obs</value></property>
					<property name="formView"><value>/admin/observations/obsForm</value></property>
					<property name="successView"><value>index.htm</value></property>
				</bean>
			
				<!--this is the optional method of declaring values in the constructor -->
				<!--<bean id="mimeTypeList" class="org.openmrs.web.controller.observation.MimeTypeListController" />-->
				<!--<bean id="mimeTypeForm" class="org.openmrs.web.controller.observation.MimeTypeFormController" />-->
	
				<bean id="mimeTypeList" class="org.openmrs.web.controller.observation.MimeTypeListController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>mimeTypeList</value></property>
					<property name="formView"><value>/admin/observations/mimeTypeList</value></property>
					<property name="successView"><value>mimeType.list</value></property>
				</bean>
		
				<!--  Validator and Form Controller for the add/edit order types page -->
				<bean id="mimeTypeValidator" class="org.openmrs.web.controller.observation.MimeTypeValidator"/>
				<bean id="mimeTypeForm" class="org.openmrs.web.controller.observation.MimeTypeFormController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>mimeType</value></property>
					<property name="validator"><ref bean="mimeTypeValidator"/></property>
					<property name="formView"><value>/admin/observations/mimeTypeForm</value></property>
					<property name="successView"><value>mimeType.list</value></property>
				</bean>
			<!-- ** /Mime Type ** -->
		<!-- ====== /Observation Sector ====== -->

	    <!-- ========================== -->	    
	    <!-- ====== Order Sector ====== -->
	    <!-- ========================== -->

			<!-- ** Order Type ** -->
				<!--this is the optional method of declaring values in the constructor -->
				<!--<bean id="orderTypeList" class="org.openmrs.web.controller.OrderTypeListController" />-->
				<!--<bean id="orderTypeForm" class="org.openmrs.web.controller.OrderTypeFormController" />-->
	
				<bean id="orderTypeList" class="org.openmrs.web.controller.order.OrderTypeListController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>orderTypeList</value></property>
					<property name="formView"><value>/admin/orders/orderTypeList</value></property>
					<property name="successView"><value>orderType.list</value></property>
				</bean>
		
				<!--  Validator and Form Controller for the add/edit order types page -->
				<bean id="orderTypeValidator" class="org.openmrs.web.controller.order.OrderTypeValidator"/>
				<bean id="orderTypeForm" class="org.openmrs.web.controller.order.OrderTypeFormController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>orderType</value></property>
					<property name="validator"><ref bean="orderTypeValidator"/></property>
					<property name="formView"><value>/admin/orders/orderTypeForm</value></property>
					<property name="successView"><value>orderType.list</value></property>
				</bean>
			<!-- ** /Order Type ** -->
		<!-- ====== /Order Sector ====== -->

		
	    <!-- ========================== -->
		<!-- ===== Patient Sector ===== -->
	    <!-- ========================== -->
	    
	    	<!-- ** Patient ** -->
				<bean id="patientValidator" class="org.openmrs.web.controller.patient.PatientValidator"/>
				<bean id="patientForm" class="org.openmrs.web.controller.patient.PatientFormController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>patient</value></property>
					<property name="validator"><ref bean="patientValidator"/></property>
					<property name="formView"><value>/admin/patients/patientForm</value></property>
					<property name="successView"><value>index.htm</value></property>
				</bean>
			<!-- ** /Patient ** -->
			<!-- ** New (mini) Patient ** -->
				<bean id="newPatientForm" class="org.openmrs.web.controller.patient.NewPatientFormController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>patient</value></property>
					<property name="commandClass"><value>org.openmrs.web.dwr.PatientListItem</value></property>
					<property name="formView"><value>/admin/patients/newPatientForm</value></property>
					<property name="successView"><value>/@WEBAPP.NAME@/formentry/patientSummary.form</value></property>
				</bean>
			<!-- ** /New Patient ** -->
			
			<!-- **  Tribe   ** -->
				<bean id="tribeList" class="org.openmrs.web.controller.patient.TribeListController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>tribeList</value></property>
					<property name="formView"><value>/admin/patients/tribeList</value></property>
					<property name="successView"><value>tribe.list</value></property>
				</bean>
				<bean id="tribeValidator" class="org.openmrs.web.controller.patient.TribeValidator"/>
				<bean id="tribeForm" class="org.openmrs.web.controller.patient.TribeFormController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>tribe</value></property>
					<property name="validator"><ref bean="tribeValidator"/></property>
					<property name="formView"><value>/admin/patients/tribeForm</value></property>
					<property name="successView"><value>tribe.list</value></property>
				</bean>
				<bean id="tribeListTaskpane" class="org.openmrs.web.controller.TribeListController">
					<property name="commandName"><value>tribes</value></property>
					<property name="commandClass"><value>java.util.List</value></property>
					<property name="formView"><value>/formentry/taskpane/tribe</value></property>
					<property name="successView"><value>/formentry/taskpane/tribe</value></property>
				</bean>
				
			<!-- ** /Tribe   ** -->
			<!-- **  Patient Identifier Type   ** -->
				<bean id="patientIdentifierTypeList" class="org.openmrs.web.controller.patient.PatientIdentifierTypeListController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>patientIdentifierTypeList</value></property>
					<property name="formView"><value>/admin/patients/patientIdentifierTypeList</value></property>
					<property name="successView"><value>patientIdentifierType.list</value></property>
				</bean>
				<bean id="patientIdentifierTypeValidator" class="org.openmrs.web.controller.patient.PatientIdentifierTypeValidator"/>
				<bean id="patientIdentifierTypeForm" class="org.openmrs.web.controller.patient.PatientIdentifierTypeFormController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>patientIdentifierType</value></property>
					<property name="validator"><ref bean="patientIdentifierTypeValidator"/></property>
					<property name="formView"><value>/admin/patients/patientIdentifierTypeForm</value></property>
					<property name="successView"><value>patientIdentifierType.list</value></property>
				</bean>
			<!-- ** /Patient Identifier Type   ** -->			
		
		<!-- ====== /Patient Sector ====== -->

	    <!-- ========================== -->
		<!-- ===== User Sector ===== -->
	    <!-- ========================== -->
	    
	    	<!-- ** User ** -->
	    		<bean id="userList" class="org.openmrs.web.controller.user.UserListController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>userList</value></property>
					<property name="formView"><value>/admin/users/userList</value></property>
					<property name="successView"><value>user.list</value></property>
				</bean>
				<bean id="userValidator" class="org.openmrs.web.controller.user.UserValidator"/>
				<bean id="userForm" class="org.openmrs.web.controller.user.UserFormController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>user</value></property>
					<property name="validator"><ref bean="userValidator"/></property>
					<property name="formView"><value>/admin/users/userForm</value></property>
					<property name="successView"><value>user.list</value></property>
				</bean>
			<!-- ** /User ** -->
			<!-- ** Role  ** -->
				<bean id="roleList" class="org.openmrs.web.controller.user.RoleListController">
						<property name="sessionForm"><value>true</value></property>
						<property name="commandName"><value>roleList</value></property>
						<property name="formView"><value>/admin/users/roleList</value></property>
						<property name="successView"><value>role.list</value></property>
					</bean>
			
					<!--  Validator and Form Controller for the add/edit role page -->
					<bean id="roleValidator" class="org.openmrs.web.controller.user.RoleValidator"/>
					<bean id="roleForm" class="org.openmrs.web.controller.user.RoleFormController">
						<property name="sessionForm"><value>true</value></property>
						<property name="commandName"><value>role</value></property>
						<property name="validator"><ref bean="roleValidator"/></property>
						<property name="formView"><value>/admin/users/roleForm</value></property>
						<property name="successView"><value>role.list</value></property>
					</bean>
			<!--  ** /Role ** -->
			<!-- ** Privilege  ** -->
				<bean id="privilegeList" class="org.openmrs.web.controller.user.PrivilegeListController">
						<property name="sessionForm"><value>true</value></property>
						<property name="commandName"><value>privilegeList</value></property>
						<property name="formView"><value>/admin/users/privilegeList</value></property>
						<property name="successView"><value>privilege.list</value></property>
					</bean>
			
					<!--  Validator and Form Controller for the add/edit privilege page -->
					<bean id="privilegeValidator" class="org.openmrs.web.controller.user.PrivilegeValidator"/>
					<bean id="privilegeForm" class="org.openmrs.web.controller.user.PrivilegeFormController">
						<property name="sessionForm"><value>true</value></property>
						<property name="commandName"><value>privilege</value></property>
						<property name="validator"><ref bean="privilegeValidator"/></property>
						<property name="formView"><value>/admin/users/privilegeForm</value></property>
						<property name="successView"><value>privilege.list</value></property>
					</bean>
			<!--  ** /Privilege ** -->
			<!-- ** Group  ** -->
				<bean id="groupList" class="org.openmrs.web.controller.user.GroupListController">
						<property name="sessionForm"><value>true</value></property>
						<property name="commandName"><value>groupList</value></property>
						<property name="formView"><value>/admin/users/groupList</value></property>
						<property name="successView"><value>group.list</value></property>
					</bean>
			
					<!--  Validator and Form Controller for the add/edit group page -->
					<bean id="groupValidator" class="org.openmrs.web.controller.user.GroupValidator"/>
					<bean id="groupForm" class="org.openmrs.web.controller.user.GroupFormController">
						<property name="sessionForm"><value>true</value></property>
						<property name="commandName"><value>group</value></property>
						<property name="validator"><ref bean="groupValidator"/></property>
						<property name="formView"><value>/admin/users/groupForm</value></property>
						<property name="successView"><value>group.list</value></property>
					</bean>
			<!--  ** /Group ** -->		
		<!-- ====== /User Sector ====== -->
		
	    <!-- ============================ -->
		<!-- ===== Encounter Sector ===== -->
	    <!-- ============================ -->
	    		<!-- ** Encounter      ** -->
	    		<bean id="encounterForm" class="org.openmrs.web.controller.encounter.EncounterFormController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>encounter</value></property>
					<property name="formView"><value>/admin/encounters/encounterForm</value></property>
					<property name="successView"><value>index.htm</value></property>
				</bean>
				<!-- ** /Encounter     ** -->
				
				<!-- ** Encounter Type ** -->
				<bean id="encounterTypeList" class="org.openmrs.web.controller.encounter.EncounterTypeListController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>encounterTypeList</value></property>
					<property name="formView"><value>/admin/encounters/encounterTypeList</value></property>
					<property name="successView"><value>encounterType.list</value></property>
				</bean>
		
				<!--  Validator and Form Controller for the add/edit encounter types page -->
				<bean id="encounterTypeValidator" class="org.openmrs.web.controller.encounter.EncounterTypeValidator"/>
				<bean id="encounterTypeForm" class="org.openmrs.web.controller.encounter.EncounterTypeFormController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>encounterType</value></property>
					<property name="validator"><ref bean="encounterTypeValidator"/></property>
					<property name="formView"><value>/admin/encounters/encounterTypeForm</value></property>
					<property name="successView"><value>encounterType.list</value></property>
				</bean>
			<!-- ** /Encounter Type ** -->
			<!-- ** Location ** -->
				<bean id="locationList" class="org.openmrs.web.controller.encounter.LocationListController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>locationList</value></property>
					<property name="formView"><value>/admin/encounters/locationList</value></property>
					<property name="successView"><value>location.list</value></property>
				</bean>
		
				<!--  Validator and Form Controller for the add/edit encounter types page -->
				<bean id="locationValidator" class="org.openmrs.web.controller.encounter.LocationValidator"/>
				<bean id="locationForm" class="org.openmrs.web.controller.encounter.LocationFormController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>location</value></property>
					<property name="validator"><ref bean="locationValidator"/></property>
					<property name="formView"><value>/admin/encounters/locationForm</value></property>
					<property name="successView"><value>location.list</value></property>
				</bean>
			<!-- ** /Location ** -->
	    <!-- ============================ -->
	    			
	    <!-- ============================ -->
		<!-- =====  Concept Sector  ===== -->
	    <!-- ============================ -->
			<!-- ** Concept ** -->
				<bean id="conceptValidator" class="org.openmrs.web.controller.ConceptFormValidator"/>
		    	<bean id="conceptForm" class="org.openmrs.web.controller.ConceptFormController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>concept</value></property>
					<property name="validator"><ref bean="conceptValidator"/></property>
					<property name="formView"><value>/dictionary/conceptForm</value></property>
					<property name="successView"><value>concept.form</value></property>
				</bean>
		    	<bean id="conceptView" class="org.openmrs.web.controller.ConceptFormController">
					<property name="commandName"><value>concept</value></property>
					<property name="formView"><value>/dictionary/concept</value></property>
					<property name="successView"><value>concept.htm</value></property>
				</bean>
			<!-- ** /Concept ** -->
			<!-- ** Concept Class ** -->		
				<bean id="conceptClassList" class="org.openmrs.web.controller.concept.ConceptClassListController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>conceptClassList</value></property>
					<property name="formView"><value>/admin/concepts/conceptClassList</value></property>
					<property name="successView"><value>conceptClass.list</value></property>
				</bean>
		
				<!--  Validator and Form Controller for the add/edit concept types page -->
				<bean id="conceptClassValidator" class="org.openmrs.web.controller.concept.ConceptClassValidator"/>
				<bean id="conceptClassForm" class="org.openmrs.web.controller.concept.ConceptClassFormController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>conceptClass</value></property>
					<property name="validator"><ref bean="conceptClassValidator"/></property>
					<property name="formView"><value>/admin/concepts/conceptClassForm</value></property>
					<property name="successView"><value>conceptClass.list</value></property>
				</bean>
			<!--  ** /Concept Class ** -->
			<!--  ** Concept Datatype ** -->
				<bean id="conceptDatatypeList" class="org.openmrs.web.controller.concept.ConceptDatatypeListController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>conceptDatatypeList</value></property>
					<property name="formView"><value>/admin/concepts/conceptDatatypeList</value></property>
					<property name="successView"><value>conceptDatatype.list</value></property>
				</bean>
		
				<!--  Validator and Form Controller for the add/edit concept types page -->
				<bean id="conceptDatatypeValidator" class="org.openmrs.web.controller.concept.ConceptDatatypeValidator"/>
				<bean id="conceptDatatypeForm" class="org.openmrs.web.controller.concept.ConceptDatatypeFormController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>conceptDatatype</value></property>
					<property name="validator"><ref bean="conceptDatatypeValidator"/></property>
					<property name="formView"><value>/admin/concepts/conceptDatatypeForm</value></property>
					<property name="successView"><value>conceptDatatype.list</value></property>
				</bean>
			<!--  ** /Concept Datatype ** -->
			<!--  ** ConceptWord ** -->
				<bean id="conceptWordForm" class="org.openmrs.web.controller.concept.ConceptWordFormController">
					<property name="commandName"><value>conceptId</value></property>
					<property name="commandClass"><value>java.lang.String</value></property>
					<property name="formView"><value>/admin/concepts/conceptWordForm</value></property>
					<property name="successView"><value>conceptWord.form</value></property>
				</bean>
			<!-- ** /Concept Word ** -->
			<!-- ** Concept Set Derived ** -->
				<bean id="conceptSetDerivedForm" class="org.openmrs.web.controller.concept.ConceptSetDerivedFormController">
					<property name="commandName"><value>conceptId</value></property>
					<property name="commandClass"><value>java.lang.String</value></property>
					<property name="formView"><value>/admin/concepts/conceptSetDerivedForm</value></property>
					<property name="successView"><value>conceptSetDerived.form</value></property>
				</bean>
			<!-- ** /Concept Set Derived ** -->
			<!--  ** Concept Proposal ** -->
				<bean id="conceptProposalList" class="org.openmrs.web.controller.concept.ConceptProposalListController">
					<property name="commandName"><value>conceptProposalList</value></property>
					<property name="formView"><value>/admin/concepts/conceptProposalList</value></property>
					<property name="successView"><value>conceptProposal.list</value></property>
				</bean>
		
				<!--  Validator and Form Controller for the add/edit concept types page -->
				<bean id="conceptProposalForm" class="org.openmrs.web.controller.concept.ConceptProposalFormController">
					<property name="commandName"><value>conceptProposal</value></property>
					<property name="formView"><value>/admin/concepts/conceptProposalForm</value></property>
					<property name="successView"><value>conceptProposal.list</value></property>
				</bean>
			<!--  ** /Concept Proposal ** -->
	    <!-- ============================ -->
		    
		    
	    <!-- ============================ -->
		<!-- ===== Report Sector ===== -->
	    <!-- ============================ -->
			<!-- ** Report ** -->
				<bean id="reportList" class="org.openmrs.web.controller.report.ReportListController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>reportList</value></property>
					<property name="formView"><value>/admin/reports/reportList</value></property>
					<property name="successView"><value>report.list</value></property>
				</bean>
		
				<!--  Validator and Form Controller for the add/edit reports page -->
				<bean id="reportValidator" class="org.openmrs.web.controller.report.ReportValidator"/>
				<bean id="reportForm" class="org.openmrs.web.controller.report.ReportFormController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>report</value></property>
					<property name="validator"><ref bean="reportValidator"/></property>
					<property name="formView"><value>/admin/reports/reportForm</value></property>
					<property name="successView"><value>report.list</value></property>
				</bean>
			<!-- ** /Report ** -->
	    <!-- ============================ -->

	    <!-- ============================ -->
		<!-- ===== Analysis Sector ===== -->
	    <!-- ============================ -->
			<!-- ** Analysis ** -->
				<bean id="otfaController" class="org.openmrs.web.controller.analysis.OnTheFlyAnalysisController"/>
			    <bean id="otfaParamResolver" class="org.springframework.web.servlet.mvc.multiaction.ParameterMethodNameResolver">
					<property name="paramName"><value>method</value></property>
					<property name="defaultMethodName"><value>handleRequest</value></property>
				</bean>
			    <bean id="otfaActionController" class="org.springframework.web.servlet.mvc.multiaction.MultiActionController">
					<property name="methodNameResolver"><ref bean="otfaParamResolver"/></property>
					<property name="delegate"><ref bean="otfaController"/></property>
				</bean>
				<!-- ** /Analysis ** -->
	    <!-- ============================ -->


	    <!-- ============================ -->
		<!-- ===== Form Sector ===== -->
	    <!-- ============================ -->
	    
			<!-- ** Form ** -->
				<bean id="formList" class="org.openmrs.web.controller.form.FormListController">
					<property name="commandName"><value>formList</value></property>
					<property name="formView"><value>/admin/forms/formList</value></property>
					<property name="successView"><value>form.list</value></property>
				</bean>
		
				<bean id="formDesignForm" class="org.openmrs.web.controller.form.FormFormController">
					<property name="commandName"><value>form</value></property>
					<property name="formView"><value>/admin/forms/formDesignForm</value></property>
					<property name="successView"><value>form.list</value></property>
				</bean>

				<bean id="formEditForm" class="org.openmrs.web.controller.form.FormFormController">
					<property name="commandName"><value>form</value></property>
					<property name="formView"><value>/admin/forms/formEditForm</value></property>
					<property name="successView"><value>form.list</value></property>
				</bean>
			<!-- ** /Form ** -->

			<!-- ** Field  ** -->
				<bean id="fieldList" class="org.openmrs.web.controller.form.FieldListController">
					<property name="commandName"><value>fieldList</value></property>
					<property name="formView"><value>/admin/forms/fieldList</value></property>
					<property name="successView"><value>field.list</value></property>
				</bean>

				<bean id="fieldForm" class="org.openmrs.web.controller.form.FieldFormController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>field</value></property>
					<property name="formView"><value>/admin/forms/fieldForm</value></property>
					<property name="successView"><value>field.list</value></property>
				</bean>
			<!-- ** /Field  ** -->

	    
			<!-- ** Field Type ** -->
				<bean id="fieldTypeList" class="org.openmrs.web.controller.form.FieldTypeListController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>fieldTypeList</value></property>
					<property name="formView"><value>/admin/forms/fieldTypeList</value></property>
					<property name="successView"><value>fieldType.list</value></property>
				</bean>
		
				<!--  Validator and Form Controller for the add/edit forms page -->
				<bean id="fieldTypeValidator" class="org.openmrs.web.controller.form.FieldTypeValidator"/>
				<bean id="fieldTypeForm" class="org.openmrs.web.controller.form.FieldTypeFormController">
					<property name="sessionForm"><value>true</value></property>
					<property name="commandName"><value>fieldType</value></property>
					<property name="validator"><ref bean="fieldTypeValidator"/></property>
					<property name="formView"><value>/admin/forms/fieldTypeForm</value></property>
					<property name="successView"><value>fieldType.list</value></property>
				</bean>
			<!-- ** /Field Type ** -->
	    <!-- ============================ -->

	    <!-- =========================== -->
		<!-- =====      Other      ===== -->
	    <!-- =========================== -->
			<bean id="optionsForm" class="org.openmrs.web.controller.OptionsFormController">
				<property name="commandName"><value>opts</value></property>
				<property name="commandClass"><value>org.openmrs.web.OptionsForm</value></property>
				<property name="formView"><value>/optionsForm</value></property>
				<property name="successView"><value>options.form</value></property>
			</bean>
			<bean id="patientSummaryForm" class="org.openmrs.web.controller.patient.PatientFormController">
				<property name="commandName"><value>patient</value></property>
				<property name="formView"><value>/formentry/patientSummaryForm</value></property>
				<property name="successView"><value>patientSummary.form</value></property>
			</bean>
			
		<!-- =========================== -->
		
		<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
			<property name="basename">
				<value>messages</value>
			</property>
		</bean>
		
		<bean id="localeResolver" class="org.openmrs.web.OpenmrsCookieLocaleResolver" />
		
		<bean id="localeChangeInterceptor"
			class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
				<property name="paramName"><value>lang</value></property>
		</bean>
		
	</beans>




<!--<beans>-->

	<!-- Hibernate SessionFactory -->
	<!-- 
	<bean id="sessionFactory"
		class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
		<property name="configLocation" value="hibernate.cfg.xml" />
	</bean>
	-->

	<!-- Transaction manager for a single Hibernate SessionFactory (alternative to JTA) -->
	<!-- 
	<bean id="transactionManager"
		class="org.springframework.orm.hibernate3.HibernateTransactionManager">
		<property name="sessionFactory" ref="sessionFactory" />
	</bean>
	-->

	<!-- ### for ***EVERY*** domain object! Ouch!
		<bean id="myProductDao" class="product.ProductDaoImpl">
		<property name="sessionFactory">
		<ref bean="mySessionFactory" />
		</property>
		<property name="exampleParam">
		<value>someValue</value>
		</property>
		</bean>
	-->
	
	<!--  Default context -->
	<!-- 
	<bean id="defaultContextTarget" class="org.openmrs.context.HibernateContext">
		<property name="sessionFactory">
			<ref bean="sessionFactory" />
		</property>
	</bean>
	
	<bean id="defaultContext"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager" ref="transactionManager" />
		<property name="target" ref="defaultContextTarget" />
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>
	-->
	
	
	
	<!--<bean id="defaultContext"
		class="org.openmrs.context.IbatisContext" />-->
	
	
		

	<!--  User service -->
	<!-- 
	<bean id="userServiceTarget"
		class="org.openmrs.api.hibernate.HibernateUserService">
		<property name="sessionFactory">
			<ref bean="sessionFactory" />
		</property>
	</bean>

	<bean id="userService"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager" ref="transactionManager" />
		<property name="target" ref="userServiceTarget" />
		<property name="transactionAttributes">
			<props>
				<prop key="get*">PROPAGATION_REQUIRED,readOnly</prop>
				<prop key="find*">PROPAGATION_REQUIRED,readOnly</prop>
				<prop key="load*">PROPAGATION_REQUIRED,readOnly</prop>
				<prop key="store*">PROPAGATION_REQUIRED</prop>
			</props>
		</property>
	</bean>
	-->

	<!-- 
	<bean id="patientServiceTarget"
		class="org.openmrs.api.hibernate.HibernatePatientService">
		<property name="sessionFactory"><ref bean="sessionFactory" /></property>
	</bean>
	
	<bean id="patientService"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager" ref="transactionManager" />
		<property name="target" ref="patientServiceTarget" />
		<property name="transactionAttributes">
			<props>
				<prop key="get*">PROPAGATION_REQUIRED,readOnly</prop>
				<prop key="find*">PROPAGATION_REQUIRED,readOnly</prop>
				<prop key="load*">PROPAGATION_REQUIRED,readOnly</prop>
				<prop key="store*">PROPAGATION_REQUIRED</prop>
			</props>
		</property>
	</bean>
	-->

	<!--
	<bean id="loginValidator" class="org.openmrs.web.LoginValidator" />
	<bean id="loginForm" class="org.openmrs.web.LoginController">
		<property name="commandName" value="credentials" />
		<property name="commandClass" value="org.openmrs.web.Credentials" />
		<property name="validator"><ref bean="loginValidator" /></property>
		<property name="formView" value="login/login" />
		<property name="successView" value="/formentry/welcome" />
	</bean>

	<bean id="patientSearchValidator"
		class="org.openmrs.formentry.web.PatientSearchValidator" />
	<bean id="patientSearchForm"
		class="org.openmrs.formentry.web.PatientSearchFormController">
		<property name="commandName" value="query" />
		<property name="commandClass"
			value="org.openmrs.formentry.web.SimpleQueryCommand" />
		<property name="validator"><ref bean="patientSearchValidator" /></property>
		<property name="formView" value="formentry/patientSearch" />
		<property name="successView" value="formentry/selectPatient" />
	</bean>

	<bean id="selectPatientValidator"
		class="org.openmrs.formentry.web.SelectPatientValidator" />
	<bean id="selectPatientForm"
		class="org.openmrs.formentry.web.SelectPatientFormController">
		<property name="commandName" value="query" />
		<property name="commandClass"
			value="org.openmrs.formentry.web.SimpleQueryCommand" />
		<property name="validator"><ref bean="selectPatientValidator" /></property>
		<property name="formView" value="/formentry/selectPatient" />
		<property name="successView" value="selectForm.form" />
	</bean>

	<bean id="urlMapping"
		class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
		<property name="interceptors">
			<list>
				<ref bean="openSessionInViewInterceptor" />
			</list>
		</property>
		<property name="mappings">
			<props>
				<prop key="/login.form">loginForm</prop>
				<prop key="/formentry/patientSearch.form">patientSearchForm</prop>
				<prop key="/formentry/selectPatient.form">selectPatientForm</prop>
			</props>
		</property>
	</bean>

	<bean id="messageSource"
		class="org.springframework.context.support.ResourceBundleMessageSource">
		<property name="basename"><value>message</value></property>
	</bean>

	<bean id="viewResolver"
		class="org.springframework.web.servlet.view.JstlView">
		<property name="prefix" value="/WEB-INF/view/" />
		<property name="suffix" value=".jsp" />
	</bean>

	<bean name="openSessionInViewInterceptor"
		class="org.springframework.orm.hibernate3.support.OpenSessionInViewInterceptor">
		<property name="sessionFactory"><ref bean="sessionFactory" /></property>
	</bean>
	-->

	<!--
		- This bean resolves specific types of exception to corresponding error views.
		- The default behaviour of DispatcherServlet is to propagate all exceptions to the
		- servlet container: This will happen here with all other types of exception.
	-->
	<!--
	<bean id="exceptionResolver"
		class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
		<property name="exceptionMappings">
			<props>
				<prop key="org.springframework.dao.DataAccessException">
					dataAccessFailure
				</prop>
				<prop key="org.springframework.transaction.TransactionException">
					dataAccessFailure
				</prop>
			</props>
		</property>
	</bean>
	-->

<!--</beans>-->